{
  "all_hints_text": "\n\n",
  "base_commit": "2400311368a121c7829a19e407fd17facd0e5c6a",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/1456058ecd7cc6f53acdd60140173d5cf40df7f1",
    "https://github.com/pylint-dev/astroid/commit/91fe49f262a91044ff84cef81d64030f1b75ef18"
  ],
  "created_at": "2025-08-21T12:18:31Z",
  "hints_text": "\n\n",
  "instance_id": "pylint-dev__astroid-2806",
  "issue_numbers": [
    2519
  ],
  "language": "python",
  "patch": "diff --git a/ChangeLog b/ChangeLog\nindex b49d64746..47bb4d19b 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -7,6 +7,10 @@ What's New in astroid 4.0.0?\n ============================\n Release date: TBA\n \n+* Fix crash when inferring namedtuple with invalid field name looking like f-string formatting.\n+\n+  Closes #2519\n+\n * Fix false positive no-member in except * handler.\n \n   Closes pylint-dev/pylint#9056\ndiff --git a/astroid/exceptions.py b/astroid/exceptions.py\nindex 126acb954..e523b70c3 100644\n--- a/astroid/exceptions.py\n+++ b/astroid/exceptions.py\n@@ -64,7 +64,10 @@ def __init__(self, message: str = \"\", **kws: Any) -> None:\n             setattr(self, key, value)\n \n     def __str__(self) -> str:\n-        return self.message.format(**vars(self))\n+        try:\n+            return self.message.format(**vars(self))\n+        except ValueError:\n+            return self.message  # Return raw message if formatting fails\n \n \n class AstroidBuildingError(AstroidError):\n",
  "problem_statement": "ValueError when stringifying namedtuple exception that contains invalid format string\n### Steps to reproduce\r\n\r\nThe following code triggers a `ValueError` in astroid:\r\n\r\n```python\r\nnamedtuple('a','}').format()\r\n```\r\n\r\nThis bug was discovered by OSS-Fuzz:\r\nhttps://bugs.chromium.org/p/oss-fuzz/issues/detail?id=67054 (report not public yet)\r\n\r\n### Current behavior\r\n```\r\nException on node <Module.a l.0 at 0x70283aefedb0> in file 'corpus/a.py'\r\nTraceback (most recent call last):\r\n  File \"pylint/pylint/checkers/utils.py\", line 1365, in safe_infer\r\n    value = next(infer_gen)\r\n            ^^^^^^^^^^^^^^^\r\n  File \"astroid/astroid/nodes/node_ng.py\", line 168, in infer\r\n    for i, result in enumerate(self._infer(context=context, **kwargs)):\r\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"astroid/astroid/decorators.py\", line 86, in inner\r\n    yield next(generator)\r\n          ^^^^^^^^^^^^^^^\r\n  File \"astroid/astroid/decorators.py\", line 49, in wrapped\r\n    for res in _func(node, context, **kwargs):\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"astroid/astroid/nodes/node_classes.py\", line 1091, in _infer_attribute\r\n    for owner in node.expr.infer(context):\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"astroid/astroid/nodes/node_ng.py\", line 147, in infer\r\n    for result in self._explicit_inference(\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"astroid/astroid/inference_tip.py\", line 70, in inner\r\n    raise e from None\r\n  File \"astroid/astroid/inference_tip.py\", line 66, in inner\r\n    func(node, context, **kwargs)\r\n  File \"astroid/astroid/brain/brain_namedtuple_enum.py\", line 228, in infer_named_tuple\r\n    raise UseInferenceDefault(\"ValueError: \" + str(exc)) from exc\r\n                                               ^^^^^^^^\r\n  File \"astroid/astroid/exceptions.py\", line 67, in __str__\r\n    return self.message.format(**vars(self))\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nValueError: Single '}' encountered in format string\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"pylint/pylint/utils/ast_walker.py\", line 91, in walk\r\n    callback(astroid)\r\n  File \"pylint/pylint/checkers/base/docstring_checker.py\", line 108, in visit_module\r\n    self._check_docstring(\"module\", node)\r\n  File \"pylint/pylint/checkers/base/docstring_checker.py\", line 187, in _check_docstring\r\n    func = utils.safe_infer(node.body[0].value.func)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"pylint/pylint/checkers/utils.py\", line 1369, in safe_infer\r\n    raise AstroidError from e\r\nastroid.exceptions.AstroidError\r\n```\r\n\r\n### Expected behavior\r\nNo crash\r\n\r\n### Version\r\nd8dbc462243a65d72153ace2e7ac87daa9ffc1cf\n",
  "pull_number": 2806,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/test_regrtest.py b/tests/test_regrtest.py\nindex 9fcc378dc..1b16662c6 100644\n--- a/tests/test_regrtest.py\n+++ b/tests/test_regrtest.py\n@@ -550,3 +550,14 @@ def test_regression_infer_dict_literal_comparison_uninferable() -> None:\n     node = extract_node(\"{{}}>0\")\n     inferred = next(node.infer())\n     assert inferred.value == Uninferable\n+\n+\n+def test_regression_infer_namedtuple_invalid_fieldname_error() -> None:\n+    \"\"\"Regression test for issue #2519.\"\"\"\n+    code = \"\"\"\n+    from collections import namedtuple\n+    namedtuple('a','}')\n+    \"\"\"\n+    node = extract_node(code)\n+    inferred = next(node.infer())\n+    assert inferred.value == Uninferable\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/2400311368a121c7829a19e407fd17facd0e5c6a"
}