{
  "all_hints_text": "There is a similar crash with `_TupleType()`.\n\n",
  "base_commit": "a14cc3c6c8c112ea4b8204351cebe2680f4c021b",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/16f0e8b6a6ddd03f9cde92d236fa19201896cfe8"
  ],
  "created_at": "2025-10-01T14:14:43Z",
  "hints_text": "There is a similar crash with `_TupleType()`.\n\n",
  "instance_id": "pylint-dev__astroid-2844",
  "issue_numbers": [
    2772
  ],
  "language": "python",
  "patch": "diff --git a/astroid/brain/brain_typing.py b/astroid/brain/brain_typing.py\nindex e1679ae72..8ad8a8bd3 100644\n--- a/astroid/brain/brain_typing.py\n+++ b/astroid/brain/brain_typing.py\n@@ -345,16 +345,20 @@ def _looks_like_special_alias(node: nodes.Call) -> bool:\n     PY37: Callable = _VariadicGenericAlias(collections.abc.Callable, (), special=True)\n     PY39: Callable = _CallableType(collections.abc.Callable, 2)\n     \"\"\"\n-    return isinstance(node.func, nodes.Name) and (\n-        (\n-            node.func.name == \"_TupleType\"\n-            and isinstance(node.args[0], nodes.Name)\n-            and node.args[0].name == \"tuple\"\n-        )\n-        or (\n-            node.func.name == \"_CallableType\"\n-            and isinstance(node.args[0], nodes.Attribute)\n-            and node.args[0].as_string() == \"collections.abc.Callable\"\n+    return (\n+        isinstance(node.func, nodes.Name)\n+        and node.args\n+        and (\n+            (\n+                node.func.name == \"_TupleType\"\n+                and isinstance(node.args[0], nodes.Name)\n+                and node.args[0].name == \"tuple\"\n+            )\n+            or (\n+                node.func.name == \"_CallableType\"\n+                and isinstance(node.args[0], nodes.Attribute)\n+                and node.args[0].as_string() == \"collections.abc.Callable\"\n+            )\n         )\n     )\n \n",
  "problem_statement": "IndexError when _CallableType() has no arguments\n### Steps to reproduce\n\nThe following code triggers an `IndexError` in astroid:\n\n```python\n_CallableType()\n```\n\nThis bug was discovered by OSS-Fuzz (a bug report was not filed for it due to infrastructure issues).\n\n### Current behavior\n```\nTraceback (most recent call last):\n  File \"pylint/pylint/lint/pylinter.py\", line 994, in get_ast\n    return MANAGER.ast_from_file(filepath, modname, source=True)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/manager.py\", line 165, in ast_from_file\n    return AstroidBuilder(self).file_build(filepath, modname)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/builder.py\", line 145, in file_build\n    return self._post_build(module, builder, encoding)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/builder.py\", line 173, in _post_build\n    module = self._manager.visit_transforms(module)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/manager.py\", line 129, in visit_transforms\n    return self._transform.visit(node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 162, in visit\n    return self._visit(node)\n           ^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 84, in _visit\n    visited = self._visit_generic(value)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 112, in _visit_generic\n    return [self._visit_generic(child) for child in node]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 112, in <listcomp>\n    return [self._visit_generic(child) for child in node]\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 119, in _visit_generic\n    return self._visit(node)\n           ^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 84, in _visit\n    visited = self._visit_generic(value)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 119, in _visit_generic\n    return self._visit(node)\n           ^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 87, in _visit\n    return self._transform(node)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/transforms.py\", line 66, in _transform\n    if predicate is None or predicate(node):\n                            ^^^^^^^^^^^^^^^\n  File \"astroid/astroid/brain/brain_typing.py\", line 368, in _looks_like_special_alias\n    and isinstance(node.args[0], Attribute)\n                   ~~~~~~~~~^^^\nIndexError: list index out of range\n```\n\n### Expected behavior\nNo crash\n\n### Version\n580d17cd55af78\n",
  "pull_number": 2844,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/brain/test_typing.py b/tests/brain/test_typing.py\nindex 11b77b7f9..744be9458 100644\n--- a/tests/brain/test_typing.py\n+++ b/tests/brain/test_typing.py\n@@ -70,3 +70,23 @@ def test_infer_typing_alias_incorrect_number_of_arguments(\n         inferred = next(node.value.infer())\n         assert isinstance(inferred, bases.Instance)\n         assert inferred.name == \"_SpecialGenericAlias\"\n+\n+\n+class TestSpecialAlias:\n+    @pytest.mark.parametrize(\n+        \"code\",\n+        [\n+            \"_CallableType()\",\n+            \"_TupleType()\",\n+        ],\n+    )\n+    def test_special_alias_no_crash_on_empty_args(self, code: str) -> None:\n+        \"\"\"\n+        Regression test for: https://github.com/pylint-dev/astroid/issues/2772\n+\n+        Test that _CallableType() and _TupleType() calls with no arguments\n+        do not cause an IndexError.\n+        \"\"\"\n+        # Should not raise IndexError\n+        module = builder.parse(code)\n+        assert isinstance(module, nodes.Module)\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/a14cc3c6c8c112ea4b8204351cebe2680f4c021b"
}