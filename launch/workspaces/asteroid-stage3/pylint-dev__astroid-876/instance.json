{
  "all_hints_text": "Thanks for the report. Unfortunately it's really hard to figure out what went wrong here without a reproduction example. Is it possible to reduce the code that leads to the crash to a minimal example? That should give us at least an idea on where to look.\nThis will be fixed by https://github.com/PyCQA/astroid/pull/876. Thanks for the report.\n\n",
  "base_commit": "00ccda69584785fd22025a3f821e1c3437302eaa",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/f2a610ace640303a03c0a7078be7138d2fd88e5c"
  ],
  "created_at": "2021-01-01T10:55:22Z",
  "hints_text": "Thanks for the report. Unfortunately it's really hard to figure out what went wrong here without a reproduction example. Is it possible to reduce the code that leads to the crash to a minimal example? That should give us at least an idea on where to look.\n\n",
  "instance_id": "pylint-dev__astroid-876",
  "issue_numbers": [
    866
  ],
  "language": "python",
  "patch": "diff --git a/ChangeLog b/ChangeLog\nindex 419d64c167..a28029c2c1 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -15,6 +15,10 @@ Release Date: TBA\n \n   Closes #703\n \n+* Fix a crash in inference caused by `Uninferable` container elements\n+\n+  Close #866\n+\n * Add `python 3.9` support.\n \n * The flat attribute of ``numpy.ndarray`` is now inferred as an ``numpy.ndarray`` itself.\ndiff --git a/astroid/brain/brain_builtin_inference.py b/astroid/brain/brain_builtin_inference.py\nindex 0d76ef88a4..b1f811d49e 100644\n--- a/astroid/brain/brain_builtin_inference.py\n+++ b/astroid/brain/brain_builtin_inference.py\n@@ -224,6 +224,8 @@ def _container_generic_transform(arg, context, klass, iterables, build_elts):\n             # TODO: Does not handle deduplication for sets.\n             elts = []\n             for element in arg.elts:\n+                if not element:\n+                    continue\n                 inferred = helpers.safe_infer(element, context=context)\n                 if inferred:\n                     evaluated_object = nodes.EvaluatedObject(\n",
  "problem_statement": "Crash due to Uninferable type\n### Steps to reproduce\r\nI'm not sure exactly where the code that is breaking pylint is located\r\n\r\n### Current behavior\r\n\r\npylint crashes:\r\n\r\nFixes this bug in pylint:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/__init__.py\", line 93, in _inference_tip_cached\r\n    return iter(_cache[func, node])\r\nKeyError: (<function register_builtin_transform.<locals>._transform_wrapper at 0x7f9bd8b34040>, <Call l.281 at 0x7f9bd3b28340>)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/scratch2/anaconda3/envs/entos/bin/pylint\", line 11, in <module>\r\n    sys.exit(run_pylint())\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/__init__.py\", line 22, in run_pylint\r\n    PylintRun(sys.argv[1:])\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/lint/run.py\", line 349, in __init__\r\n    linter.check(args)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 862, in check\r\n    self._check_files(\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 896, in _check_files\r\n    self._check_file(get_ast, check_astroid_module, name, filepath, modname)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 922, in _check_file\r\n    check_astroid_module(ast_node)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 1054, in check_astroid_module\r\n    retval = self._check_astroid_module(\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/lint/pylinter.py\", line 1099, in _check_astroid_module\r\n    walker.walk(ast_node)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/utils/ast_walker.py\", line 75, in walk\r\n    self.walk(child)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/utils/ast_walker.py\", line 75, in walk\r\n    self.walk(child)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/utils/ast_walker.py\", line 72, in walk\r\n    callback(astroid)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/checkers/classes.py\", line 1866, in visit_functiondef\r\n    inferred = _safe_infer_call_result(node, node)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/pylint/checkers/classes.py\", line 449, in _safe_infer_call_result\r\n    next(inferit)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/scoped_nodes.py\", line 1722, in infer_call_result\r\n    yield from returnnode.value.infer(context)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/node_classes.py\", line 357, in infer\r\n    return self._explicit_inference(self, context, **kwargs)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/__init__.py\", line 95, in _inference_tip_cached\r\n    result = func(*args, **kwargs)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/brain/brain_builtin_inference.py\", line 135, in _transform_wrapper\r\n    result = transform(node, context=context)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/brain/brain_builtin_inference.py\", line 219, in _infer_builtin_container\r\n    return _container_generic_inference(node, context, klass, transform_func)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/brain/brain_builtin_inference.py\", line 172, in _container_generic_inference\r\n    transformed = transform(inferred)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/brain/brain_builtin_inference.py\", line 188, in _container_generic_transform\r\n    inferred = helpers.safe_infer(element, context=context)\r\n  File \"/scratch2/anaconda3/envs/entos/lib/python3.8/site-packages/astroid/helpers.py\", line 153, in safe_infer\r\n    value = next(inferit)\r\nTypeError: 'Uninferable' object is not an iterator\r\n```\r\n\r\n### Expected behavior\r\n\r\npylint finishes normally\r\n\r\n### ``python -c \"from astroid import __pkginfo__; print(__pkginfo__.version)\"`` output\r\n\r\n2.4.2\n",
  "pull_number": 876,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/unittest_inference.py b/tests/unittest_inference.py\nindex e9e32fd64b..cfc05791d1 100644\n--- a/tests/unittest_inference.py\n+++ b/tests/unittest_inference.py\n@@ -5884,5 +5884,19 @@ def test(self):\n     assert list(inferred.nodes_of_class(nodes.Const)) == []\n \n \n+def test_infer_list_of_uninferables_does_not_crash():\n+    code = \"\"\"\n+    x = [A] * 1\n+    f = [x, [A] * 2]\n+    x = list(f) + [] # List[Uninferable]\n+    tuple(x[0])\n+    \"\"\"\n+    node = extract_node(code)\n+    inferred = next(node.infer())\n+    assert isinstance(inferred, nodes.Tuple)\n+    # Would not be able to infer the first element.\n+    assert not inferred.elts\n+\n+\n if __name__ == \"__main__\":\n     unittest.main()\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/00ccda69584785fd22025a3f821e1c3437302eaa"
}