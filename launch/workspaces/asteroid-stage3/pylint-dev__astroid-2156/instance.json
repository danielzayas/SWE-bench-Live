{
  "all_hints_text": "I'm not sure we should include the tests in the packaging, almost no one use it [citation required] and this add to the download size / time.\nTests are already there.  Only few files are missing.  The complete github tarball is ca 450 kB, while sdist is ca 350 kB.  Everybody can afford +100 kB of download size / time these days :-).  Thanks.\nI think this is a reasonable request. I skimmed this [thread](https://discuss.python.org/t/should-sdists-include-docs-and-tests/14578), and it looks like views range from ambivalence to gently encouraged.\nIt looks like the complete list of missing files for tests is this:\r\n```\r\nrequirements_test_brain.txt\r\nrequirements_test.txt\r\nrequirements_test_min.txt\r\nrequirements_test_pre_commit.txt\r\ntests/__init__.py\r\ntests/resources.py\r\ntox.ini\r\n```\n\n",
  "base_commit": "42f261dbed9b3bc56118ae2496fcf48ef287d54f",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/d51f96d513c18eddec449e0d48681d6084354bc4",
    "https://github.com/pylint-dev/astroid/commit/5559d8a112e79584a4ea8c2a0b66de67660c5093",
    "https://github.com/pylint-dev/astroid/commit/2d350ddbc3033cf877e8d7d65c5c754e020f7d3a"
  ],
  "created_at": "2023-04-26T07:27:55Z",
  "hints_text": "I'm not sure we should include the tests in the packaging, almost no one use it [citation required] and this add to the download size / time.\nTests are already there.  Only few files are missing.  The complete github tarball is ca 450 kB, while sdist is ca 350 kB.  Everybody can afford +100 kB of download size / time these days :-).  Thanks.\nI think this is a reasonable request. I skimmed this [thread](https://discuss.python.org/t/should-sdists-include-docs-and-tests/14578), and it looks like views range from ambivalence to gently encouraged.\n\n",
  "instance_id": "pylint-dev__astroid-2156",
  "issue_numbers": [
    2129
  ],
  "language": "python",
  "patch": "diff --git a/.github/workflows/ci.yaml b/.github/workflows/ci.yaml\nindex 3b352dd357..cc31b3ddf4 100644\n--- a/.github/workflows/ci.yaml\n+++ b/.github/workflows/ci.yaml\n@@ -35,9 +35,8 @@ jobs:\n         id: generate-python-key\n         run: >-\n           echo \"key=base-venv-${{ env.CACHE_VERSION }}-${{\n-            hashFiles('pyproject.toml', 'requirements_test.txt',\n-          'requirements_test_min.txt', 'requirements_test_brain.txt',\n-          'requirements_test_pre_commit.txt') }}\" >> $GITHUB_OUTPUT\n+            hashFiles('pyproject.toml', 'requirements_dev.txt',\n+          'requirements_full.txt', 'requirements_minimal.txt') }}\" >> $GITHUB_OUTPUT\n       - name: Restore Python virtual environment\n         id: cache-venv\n         uses: actions/cache@v3.3.1\n@@ -52,7 +51,7 @@ jobs:\n           python -m venv venv\n           . venv/bin/activate\n           python -m pip install -U pip setuptools wheel\n-          pip install -U -r requirements_test.txt -r requirements_test_brain.txt\n+          pip install -U -r requirements_full.txt\n       - name: Generate pre-commit restore key\n         id: generate-pre-commit-key\n         run: >-\n@@ -103,9 +102,8 @@ jobs:\n         id: generate-python-key\n         run: >-\n           echo \"key=${{ env.KEY_PREFIX }}-${{ env.CACHE_VERSION }}-${{\n-            hashFiles('pyproject.toml', 'requirements_test.txt',\n-          'requirements_test_min.txt', 'requirements_test_brain.txt',\n-          'requirements_test_pre_commit.txt') }}\" >> $GITHUB_OUTPUT\n+            hashFiles('pyproject.toml', 'requirements_dev.txt',\n+          'requirements_full.txt', 'requirements_minimal.txt') }}\" >> $GITHUB_OUTPUT\n       - name: Restore Python virtual environment\n         id: cache-venv\n         uses: actions/cache@v3.3.1\n@@ -120,7 +118,7 @@ jobs:\n           python -m venv venv\n           . venv/bin/activate\n           python -m pip install -U pip setuptools wheel\n-          pip install -U -r requirements_test.txt -r requirements_test_brain.txt\n+          pip install -U -r requirements_full.txt\n           pip install -e .\n       - name: Run pytest\n         run: |\n@@ -158,8 +156,8 @@ jobs:\n         id: generate-python-key\n         run: >-\n           echo \"key=${{ env.KEY_PREFIX }}-${{ env.CACHE_VERSION }}-${{\n-            hashFiles('pyproject.toml', 'requirements_test_min.txt',\n-          'requirements_test_brain.txt') }}\" >> $env:GITHUB_OUTPUT\n+            hashFiles('pyproject.toml', 'requirements_dev.txt',\n+          'requirements_full.txt', 'requirements_minimal.txt') }}\" >> $GITHUB_OUTPUT\n       - name: Restore Python virtual environment\n         id: cache-venv\n         uses: actions/cache@v3.3.1\n@@ -174,7 +172,7 @@ jobs:\n           python -m venv venv\n           . venv\\\\Scripts\\\\activate\n           python -m pip install -U pip setuptools wheel\n-          pip install -U -r requirements_test_min.txt -r requirements_test_brain.txt\n+          pip install -U -r requirements_full.txt\n           pip install -e .\n       - name: Run pytest\n         run: |\n@@ -207,7 +205,7 @@ jobs:\n         id: generate-python-key\n         run: >-\n           echo \"key=${{ env.KEY_PREFIX }}-${{ env.CACHE_VERSION }}-${{\n-            hashFiles('pyproject.toml', 'requirements_test_min.txt')\n+            hashFiles('pyproject.toml', 'requirements_minimal.txt')\n           }}\" >> $GITHUB_OUTPUT\n       - name: Restore Python virtual environment\n         id: cache-venv\n@@ -223,7 +221,7 @@ jobs:\n           python -m venv venv\n           . venv/bin/activate\n           python -m pip install -U pip setuptools wheel\n-          pip install -U -r requirements_test_min.txt\n+          pip install -U -r requirements_minimal.txt\n           pip install -e .\n       - name: Run pytest\n         run: |\n@@ -250,7 +248,7 @@ jobs:\n           python-version: \"3.11\"\n           check-latest: true\n       - name: Install dependencies\n-        run: pip install -U -r requirements_test_min.txt\n+        run: pip install -U -r requirements_minimal.txt\n       - name: Download all coverage artifacts\n         uses: actions/download-artifact@v3.0.2\n       - name: Combine Linux coverage results\ndiff --git a/doc/release.md b/doc/release.md\nindex 83cc55d2d6..73eaaef621 100644\n--- a/doc/release.md\n+++ b/doc/release.md\n@@ -12,7 +12,7 @@ the maintenance branch. If so, release a last patch release first. See\n   example: `v2.3.5`)\n - Check the result of `git diff vX.Y-1.Z' ChangeLog`. (For example:\n   `git diff v2.3.4 ChangeLog`)\n-- Install the release dependencies: `pip3 install -r requirements_test.txt`\n+- Install the release dependencies: `pip3 install -r requirements_minimal.txt`\n - Bump the version and release by using `tbump X.Y.0 --no-push --no-tag`. (For example:\n   `tbump 2.4.0 --no-push --no-tag`)\n - Check the commit created with `git show` amend the commit if required.\n@@ -67,7 +67,7 @@ cherry-picked on the maintenance branch.\n \n - Check the result of `git diff vX.Y-1.Z-1 ChangeLog`. (For example:\n   `git diff v2.3.4 ChangeLog`)\n-- Install the release dependencies: `pip3 install -r requirements_test.txt`\n+- Install the release dependencies: `pip3 install -r requirements_minimal.txt`\n - Bump the version and release by using `tbump X.Y-1.Z --no-push`. (For example:\n   `tbump 2.3.5 --no-push`)\n - Check the result visually with `git show`.\ndiff --git a/pyproject.toml b/pyproject.toml\nindex 78da1117a0..9b3d42723c 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -45,6 +45,14 @@ license-files = [\"LICENSE\", \"CONTRIBUTORS.txt\"]  # Keep in sync with setup.cfg\n [tool.setuptools.packages.find]\n include = [\"astroid*\"]\n \n+[tool.setuptools.package-data]\n+\"*\" = [\n+    \"../requirements*.txt\",\n+    \"../tox.ini\",\n+    \"../tests/__init__.py\",\n+    \"../tests/resources.py\",\n+]\n+\n [tool.setuptools.dynamic]\n version = {attr = \"astroid.__pkginfo__.__version__\"}\n \ndiff --git a/requirements_dev.txt b/requirements_dev.txt\nnew file mode 100644\nindex 0000000000..ee1c41bc96\n--- /dev/null\n+++ b/requirements_dev.txt\n@@ -0,0 +1,8 @@\n+-r requirements_minimal.txt\n+\n+# Tools used during development, prefer running these with pre-commit\n+black\n+pre-commit\n+pylint\n+mypy\n+ruff\ndiff --git a/requirements_test_brain.txt b/requirements_full.txt\nsimilarity index 54%\nrename from requirements_test_brain.txt\nrename to requirements_full.txt\nindex 5287772ef1..3e332a2bc7 100644\n--- a/requirements_test_brain.txt\n+++ b/requirements_full.txt\n@@ -1,3 +1,7 @@\n+-r requirements_minimal.txt\n+-r requirements_dev.txt\n+\n+# Packages used to run additional tests\n attrs\n nose\n numpy>=1.17.0; python_version<\"3.11\"\ndiff --git a/requirements_minimal.txt b/requirements_minimal.txt\nnew file mode 100644\nindex 0000000000..b1ffb60872\n--- /dev/null\n+++ b/requirements_minimal.txt\n@@ -0,0 +1,8 @@\n+# Tools used when releasing\n+contributors-txt>=0.7.4\n+tbump~=6.9\n+\n+# Tools used to run tests\n+coverage~=7.2\n+pytest\n+pytest-cov~=4.0\ndiff --git a/tox.ini b/tox.ini\nindex 482eae7c56..e1794d58f3 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -5,14 +5,13 @@ isolated_build = true\n \n [testenv]\n deps =\n-  -r requirements_test.txt\n-  -r requirements_test_brain.txt\n+  -r requirements_full.txt\n commands =\n   pytest --cov {posargs}\n \n [testenv:formatting]\n deps =\n-    -r requirements_test_pre_commit.txt\n+    -r requirements_dev.txt\n commands =\n     pre-commit run --all-files\n \n",
  "problem_statement": "sdist is missing tox.ini and resources.py\nThe sdist package at PyPI is missing both `tox.ini` and `tests/resources.py` files (and maybe few others).  Without these files testing fails.  Please note that all `tests/test_*` files are properly included in the sdist package.  Please add missing files to sdist to make testing working.  Thank you.\n",
  "pull_number": 2156,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/requirements_test.txt b/requirements_test.txt\ndeleted file mode 100644\nindex a1274240c6..0000000000\n--- a/requirements_test.txt\n+++ /dev/null\n@@ -1,4 +0,0 @@\n--r requirements_test_min.txt\n--r requirements_test_pre_commit.txt\n-contributors-txt>=0.7.4\n-tbump~=6.9.0\ndiff --git a/requirements_test_min.txt b/requirements_test_min.txt\ndeleted file mode 100644\nindex 6f4db81786..0000000000\n--- a/requirements_test_min.txt\n+++ /dev/null\n@@ -1,3 +0,0 @@\n-coverage~=7.2\n-pytest\n-pytest-cov~=4.0\ndiff --git a/requirements_test_pre_commit.txt b/requirements_test_pre_commit.txt\ndeleted file mode 100644\nindex 0484daec15..0000000000\n--- a/requirements_test_pre_commit.txt\n+++ /dev/null\n@@ -1,6 +0,0 @@\n--r requirements_test_min.txt\n-black\n-pylint\n-mypy\n-ruff\n-pre-commit\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/42f261dbed9b3bc56118ae2496fcf48ef287d54f"
}