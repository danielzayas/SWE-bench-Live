{
  "all_hints_text": "Just curious: how did people find out it's the win32 issue without this being mentioned in the original question?\nWe have continuous integration for windows/mac/linux if we can't reproduce locally then we create a regression tests. Then if only the windows pipeline fail it's a windows specific issue :) \nDefinitely not a Windows exclusive issue. You can see the Linux home directory in the original question!\nIt also looks like the regression tests you added don't run on 3.7 when the original issue is specific to 3.7? \n> Definitely not a Windows exclusive issue.\r\n\r\nYeah I don't think it's a windows specific issue either, just answering the hypothetical question.  Now that I'm not on mobile anymore windows required a specific treatment in the test, which might have led @pagetok to think that.\r\n\r\nhttps://github.com/pylint-dev/astroid/pull/1364/files#diff-12f4364f9842da707e8418b6ff1172eb8da7c78c3861942e8ec19de16ba24381R1708-R1711\r\n\r\n> It also looks like the regression tests you added don't run on 3.7 when the original issue is specific to 3.7?\r\n\r\n``@test_utils.require_version(minver=\"3.7\")`` means that the test is running on 3.7, 3.8, 3.10, 3.11, (...). We do not support 3.7 anymore, so we might remove the regr test. Probably not worth the risk if I miss something here.\nwas there a PR that actually solve this issue? looks like the\r\ncurrently attached one only deals with Windows and may not be the cause\r\nhere.\r\n\r\nOn Mon, Mar 18, 2024 at 2:31\u202fAM Pierre Sassoulas ***@***.***>\r\nwrote:\r\n\r\n> Definitely not a Windows exclusive issue.\r\n>\r\n> Yeah I don't think it's a windows specific issue either, just answering\r\n> the hypothetical question. Now that I'm not on mobile anymore windows\r\n> required a specific treatment in the test, which might have led @pagetok\r\n> <https://github.com/pagetok> to think that.\r\n>\r\n>\r\n> https://github.com/pylint-dev/astroid/pull/1364/files#diff-12f4364f9842da707e8418b6ff1172eb8da7c78c3861942e8ec19de16ba24381R1708-R1711\r\n>\r\n> It also looks like the regression tests you added don't run on 3.7 when\r\n> the original issue is specific to 3.7?\r\n>\r\n> @test_utils.require_version(minver=\"3.7\") means that the test is running\r\n> on 3.7, 3.8, 3.10, 3.11, (...). We do not support 3.7 anymore, so we might\r\n> remove the regr test. Probably not worth the risk if I miss something here.\r\n>\r\n> \u2014\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/pylint-dev/astroid/issues/1124#issuecomment-2003326089>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AU6X7U6G2HOSDSE4FL6SGYDYY2X5JAVCNFSM5B4PHE42U5DIOJSWCZC7NNSXTN2JONZXKZKDN5WW2ZLOOQ5TEMBQGMZTENRQHA4Q>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n\n\n",
  "base_commit": "9363c34934f94124f4867caf1bdf8f6755201ccd",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/41b4a2991bbe0c42fd1d7a3acacf2acf41b49b43",
    "https://github.com/pylint-dev/astroid/commit/9428c7090029aeeac8abbeb973d84473426e48ba"
  ],
  "created_at": "2022-01-20T10:00:25Z",
  "hints_text": "\n\n",
  "instance_id": "pylint-dev__astroid-1364",
  "issue_numbers": [
    1124
  ],
  "language": "python",
  "patch": "diff --git a/astroid/const.py b/astroid/const.py\nindex a1bc4bfdeb..81384e346d 100644\n--- a/astroid/const.py\n+++ b/astroid/const.py\n@@ -8,6 +8,8 @@\n PY310_PLUS = sys.version_info >= (3, 10)\n BUILTINS = \"builtins\"  # TODO Remove in 2.8\n \n+WIN32 = sys.platform == \"win32\"\n+\n \n class Context(enum.Enum):\n     Load = 1\n",
  "problem_statement": "MRO failure on Python 3.7 with typing_extensions\n### Steps to reproduce\r\n\r\nRun the following script on Python 3.7:\r\n\r\n```python\r\nfrom astroid import parse\r\nmodule = parse(\"\"\"\r\nimport abc\r\nimport typing\r\nimport dataclasses\r\n\r\nimport typing_extensions\r\n\r\nT = typing.TypeVar(\"T\")\r\n\r\nclass MyProtocol(typing_extensions.Protocol): pass\r\nclass EarlyBase(typing.Generic[T], MyProtocol): pass\r\nclass Base(EarlyBase[T], abc.ABC): pass\r\nclass Final(Base[object]): pass\r\n\"\"\")\r\n\r\n#                    typing.Protocol\r\n#                          |\r\n# typing.Generic[T]    MyProtocol\r\n#              \\       /\r\n#              EarlyBase     abc.ABC\r\n#                       \\    /\r\n#                        Base\r\n#                         |\r\n#                        Final\r\n\r\nfinal_def = module.body[-1]\r\nfinal_def.mro()\r\n```\r\n\r\n### Current behavior\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"xxx.py\", line 31, in <module>\r\n    print(\"mro:\", final_def.mro())\r\n  File \"/home/rturner/astroid/astroid/nodes/scoped_nodes.py\", line 3009, in mro\r\n    return self._compute_mro(context=context)\r\n  File \"/home/rturner/astroid/astroid/nodes/scoped_nodes.py\", line 2985, in _compute_mro\r\n    mro = base._compute_mro(context=context)\r\n  File \"/home/rturner/astroid/astroid/nodes/scoped_nodes.py\", line 2999, in _compute_mro\r\n    return _c3_merge(unmerged_mro, self, context)\r\n  File \"/home/rturner/astroid/astroid/nodes/scoped_nodes.py\", line 103, in _c3_merge\r\n    context=context,\r\nastroid.exceptions.InconsistentMroError: Cannot create a consistent method resolution order for MROs (tuple, object), (EarlyBase, tuple, Generic, object, MyProtocol), (ABC, object), (tuple, EarlyBase, ABC) of class <ClassDef.Base l.1347 at 0x7fa0efd52590>.\r\n```\r\n\r\n### Expected behavior\r\n\r\nNo MRO error is raised; Python 3.7 doesn't raise an error.\r\n\r\n### `python -c \"from astroid import __pkginfo__; print(__pkginfo__.version)\"` output\r\n\r\n2.6.7-dev0; the test case fails in pylint 2.9.6 and on the main branch at commit 6e8699cef0888631bd827b096533fc6e894d2fb2.\n",
  "pull_number": 1364,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/unittest_scoped_nodes.py b/tests/unittest_scoped_nodes.py\nindex d2db170a7c..3a2f292b9d 100644\n--- a/tests/unittest_scoped_nodes.py\n+++ b/tests/unittest_scoped_nodes.py\n@@ -43,9 +43,9 @@\n \n import pytest\n \n-from astroid import MANAGER, builder, nodes, objects, test_utils, util\n+from astroid import MANAGER, builder, nodes, objects, parse, test_utils, util\n from astroid.bases import BoundMethod, Generator, Instance, UnboundMethod\n-from astroid.const import PY38_PLUS\n+from astroid.const import PY38_PLUS, PY310_PLUS, WIN32\n from astroid.exceptions import (\n     AttributeInferenceError,\n     DuplicateBasesError,\n@@ -1670,6 +1670,49 @@ class B(A[T], A[T]): ...\n         with self.assertRaises(DuplicateBasesError):\n             cls.mro()\n \n+    @test_utils.require_version(minver=\"3.7\")\n+    def test_mro_typing_extensions(self):\n+        \"\"\"Regression test for mro() inference on typing_extesnions.\n+\n+        Regression reported in:\n+        https://github.com/PyCQA/astroid/issues/1124\n+        \"\"\"\n+        module = parse(\n+            \"\"\"\n+        import abc\n+        import typing\n+        import dataclasses\n+\n+        import typing_extensions\n+\n+        T = typing.TypeVar(\"T\")\n+\n+        class MyProtocol(typing_extensions.Protocol): pass\n+        class EarlyBase(typing.Generic[T], MyProtocol): pass\n+        class Base(EarlyBase[T], abc.ABC): pass\n+        class Final(Base[object]): pass\n+        \"\"\"\n+        )\n+        class_names = [\n+            \"ABC\",\n+            \"Base\",\n+            \"EarlyBase\",\n+            \"Final\",\n+            \"Generic\",\n+            \"MyProtocol\",\n+            \"Protocol\",\n+            \"object\",\n+        ]\n+        if not PY38_PLUS:\n+            class_names.pop(-2)\n+        # typing_extensions is not installed on this combination of version\n+        # and platform\n+        if PY310_PLUS and WIN32:\n+            class_names.pop(-2)\n+\n+        final_def = module.body[-1]\n+        self.assertEqual(class_names, sorted(i.name for i in final_def.mro()))\n+\n     def test_generator_from_infer_call_result_parent(self) -> None:\n         func = builder.extract_node(\n             \"\"\"\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/9363c34934f94124f4867caf1bdf8f6755201ccd"
}