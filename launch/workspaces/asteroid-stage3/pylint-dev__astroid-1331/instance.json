{
  "all_hints_text": "This should be relatively easy to fix by adding some values in:\r\nhttps://github.com/PyCQA/astroid/blob/d2a5b3c7b1e203fec3c7ca73c30eb1785d3d4d0a/astroid/brain/brain_attrs.py#L13-L14\r\n\r\nHowever, I have never used `attrs` so I have no idea whether the new `attrs` has the same `NAMES` as `attr`. I think we would all very much welcome a PR from somebody that has used the package themselves and knows whether they are indeed the same.\nNeed to add a changelog entry before release, thanks @DanielNoord for noticing :)\n\n",
  "base_commit": "d2a5b3c7b1e203fec3c7ca73c30eb1785d3d4d0a",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/aef413079f47486521ee5f9ab26549d09b9992fc",
    "https://github.com/pylint-dev/astroid/commit/d4a7bd823ccc7a90cd4918754b17ee6dcbfbe35a",
    "https://github.com/pylint-dev/astroid/commit/2e164f32daa75bc0255cffb724c64ec4308fef0b",
    "https://github.com/pylint-dev/astroid/commit/31199971e906b2094048f632158bf65211fa6364",
    "https://github.com/pylint-dev/astroid/commit/2e7cefecbfb20fc77c16591bb3b26c7eb248204b",
    "https://github.com/pylint-dev/astroid/commit/b2b038b93ac25b3bfa89f800247883e7e5069cad",
    "https://github.com/pylint-dev/astroid/commit/f95d7ea9efcdf22212cb761df6365ad9530b05d1",
    "https://github.com/pylint-dev/astroid/commit/1564691d26b62a56f30ac7b324d90bc587c7d4c2",
    "https://github.com/pylint-dev/astroid/commit/e1d02eb8f71e45446073cb89920080e2046c0587"
  ],
  "created_at": "2022-01-05T13:41:16Z",
  "hints_text": "\n\n",
  "instance_id": "pylint-dev__astroid-1331",
  "issue_numbers": [
    1330
  ],
  "language": "python",
  "patch": "diff --git a/astroid/brain/brain_attrs.py b/astroid/brain/brain_attrs.py\nindex 65e897ca11..6d664ade8a 100644\n--- a/astroid/brain/brain_attrs.py\n+++ b/astroid/brain/brain_attrs.py\n@@ -10,7 +10,9 @@\n from astroid.nodes.node_classes import AnnAssign, Assign, AssignName, Call, Unknown\n from astroid.nodes.scoped_nodes import ClassDef\n \n-ATTRIB_NAMES = frozenset((\"attr.ib\", \"attrib\", \"attr.attrib\", \"attr.field\", \"field\"))\n+ATTRIB_NAMES = frozenset(\n+    (\"attr.ib\", \"attrib\", \"attr.attrib\", \"attr.field\", \"attrs.field\", \"field\")\n+)\n ATTRS_NAMES = frozenset(\n     (\n         \"attr.s\",\n@@ -20,6 +22,9 @@\n         \"attr.define\",\n         \"attr.mutable\",\n         \"attr.frozen\",\n+        \"attrs.define\",\n+        \"attrs.mutable\",\n+        \"attrs.frozen\",\n     )\n )\n \n",
  "problem_statement": "`brain_attrs.py` does not support attrs v21.3.0+\n### Steps to reproduce\r\n\r\nThe [latest release](https://github.com/python-attrs/attrs/releases/tag/21.3.0) of attrs added a new module `attrs` and it seems that pylint does not recognize it.\r\n\r\n```py\r\nfrom typing import List\r\n\r\nimport attr\r\nimport attrs  # new in 21.3.0\r\n\r\n\r\n@attr.define\r\nclass Old:\r\n    items: List[str] = attr.field(factory=list)\r\n\r\n\r\n@attrs.define\r\nclass New:\r\n    items: List[str] = attrs.field(factory=list)\r\n\r\n\r\nold = Old([\"one\", \"two\"])\r\nassert old.items[0] == \"one\"  # no error here\r\n\r\nnew = New([\"three\", \"four\"])\r\nassert new.items[0] == \"three\"  # E1136: Value 'new.items' is unsubscriptable (unsubscriptable-object)\r\n```\r\n\r\nRunning `pylint` on this file causes an `unsubscriptable-object` error for only the `New` class.\r\n\r\n### Current behavior\r\n`unsubscriptable-object` for `attrs.field` but NOT `attr.field`\r\n\r\n### Expected behavior\r\n\r\n`attrs.field` (and friends) should be treated like `attr.field`\r\n\r\n### `python -c \"from astroid import __pkginfo__; print(__pkginfo__.version)\"` output\r\n2.9.2\r\n\r\nBelow is also the version of pylint used to reproduce the error above.\r\n```py\r\n> pylint --version\r\npylint 2.12.2\r\nastroid 2.9.2\r\nPython 3.6.12 (default, Dec  2 2020, 12:31:12) \r\n[GCC Apple LLVM 12.0.0 (clang-1200.0.32.27)]\r\n```\r\n\r\n\n",
  "pull_number": 1331,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/unittest_brain.py b/tests/unittest_brain.py\nindex 71cee383d0..7dfbdff23b 100644\n--- a/tests/unittest_brain.py\n+++ b/tests/unittest_brain.py\n@@ -2211,6 +2211,73 @@ class Eggs:\n             should_be_unknown = next(module.getattr(name)[0].infer()).getattr(\"d\")[0]\n             self.assertIsInstance(should_be_unknown, astroid.Unknown)\n \n+    def test_attrs_transform(self) -> None:\n+        \"\"\"Test brain for decorators of the 'attrs' package.\n+\n+        Package added support for 'attrs' a long side 'attr' in v21.3.0.\n+        See: https://github.com/python-attrs/attrs/releases/tag/21.3.0\n+        \"\"\"\n+        module = astroid.parse(\n+            \"\"\"\n+        import attrs\n+        from attrs import field, mutable, frozen\n+\n+        @attrs.define\n+        class Foo:\n+\n+            d = attrs.field(attrs.Factory(dict))\n+\n+        f = Foo()\n+        f.d['answer'] = 42\n+\n+        @attrs.define(slots=True)\n+        class Bar:\n+            d = field(attrs.Factory(dict))\n+\n+        g = Bar()\n+        g.d['answer'] = 42\n+\n+        @attrs.mutable\n+        class Bah:\n+            d = field(attrs.Factory(dict))\n+\n+        h = Bah()\n+        h.d['answer'] = 42\n+\n+        @attrs.frozen\n+        class Bai:\n+            d = attrs.field(attrs.Factory(dict))\n+\n+        i = Bai()\n+        i.d['answer'] = 42\n+\n+        @attrs.define\n+        class Spam:\n+            d = field(default=attrs.Factory(dict))\n+\n+        j = Spam(d=1)\n+        j.d['answer'] = 42\n+\n+        @attrs.mutable\n+        class Eggs:\n+            d = attrs.field(default=attrs.Factory(dict))\n+\n+        k = Eggs(d=1)\n+        k.d['answer'] = 42\n+\n+        @attrs.frozen\n+        class Eggs:\n+            d = attrs.field(default=attrs.Factory(dict))\n+\n+        l = Eggs(d=1)\n+        l.d['answer'] = 42\n+        \"\"\"\n+        )\n+\n+        for name in (\"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\"):\n+            should_be_unknown = next(module.getattr(name)[0].infer()).getattr(\"d\")[0]\n+            self.assertIsInstance(should_be_unknown, astroid.Unknown)\n+\n     def test_special_attributes(self) -> None:\n         \"\"\"Make sure special attrs attributes exist\"\"\"\n \n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/d2a5b3c7b1e203fec3c7ca73c30eb1785d3d4d0a"
}