{
  "all_hints_text": "I tried removing `coverage<5` from `tox.ini`, then I get:\r\n\r\n```\r\npy310 run-test: commands[0] | python -Wi /home/florian/proj/pylint/astroid/.tox/py310/lib/python3.10/site-packages/coverage run -m pytest --pyargs tests\r\nCould not import runpy module\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/runpy.py\", line 15, in <module>\r\n    import importlib.util\r\n  File \"/usr/lib/python3.10/importlib/util.py\", line 14, in <module>\r\n    from contextlib import contextmanager\r\n  File \"/usr/lib/python3.10/contextlib.py\", line 6, in <module>\r\n    from functools import wraps\r\n  File \"/usr/lib/python3.10/functools.py\", line 22, in <module>\r\n    from types import GenericAlias\r\n  File \"/home/florian/proj/pylint/astroid/.tox/py310/lib/python3.10/site-packages/coverage/types.py\", line 10, in <module>\r\n    from types import FrameType, ModuleType\r\nImportError: cannot import name 'FrameType' from partially initialized module 'types' (most likely due to a circular import) (/home/florian/proj/pylint/astroid/.tox/py310/lib/python3.10/site-packages/coverage/types.py)\r\n```\r\n\r\nNo idea what's adding the `site-packages/coverage/` folder to `sys.path` there? :thinking: \nWhy does that invoke `coverage -m pytest` and not `pytest --cov`? Does using `--cov` fix things?\n``tox`` is outdated because no maintainer uses it atm. I've pushed a branch, but basically we can remove almost everything because tox is not used in the CI anymore afaik.\n\n",
  "base_commit": "844d5459ad018abde0a1db54109f8f99fc19cf86",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/401e6c4f7b1ab04a6a45545d582643c02a46664d",
    "https://github.com/pylint-dev/astroid/commit/0e787ff50c9678d2433b02e2c2091efec4bf32c7",
    "https://github.com/pylint-dev/astroid/commit/e45590c4367a39502aaf2f366cfe4f94a6d0da15",
    "https://github.com/pylint-dev/astroid/commit/81d78446dbaff040333a1b263bfa64ada4fb214d",
    "https://github.com/pylint-dev/astroid/commit/ecbe601d888d343fe0590c814c7aea95c8e9862b",
    "https://github.com/pylint-dev/astroid/commit/649fcea17925d541784a34609f6fd5cd1889f872"
  ],
  "created_at": "2023-01-10T22:36:13Z",
  "hints_text": "I tried removing `coverage<5` from `tox.ini`, then I get:\r\n\r\n```\r\npy310 run-test: commands[0] | python -Wi /home/florian/proj/pylint/astroid/.tox/py310/lib/python3.10/site-packages/coverage run -m pytest --pyargs tests\r\nCould not import runpy module\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/runpy.py\", line 15, in <module>\r\n    import importlib.util\r\n  File \"/usr/lib/python3.10/importlib/util.py\", line 14, in <module>\r\n    from contextlib import contextmanager\r\n  File \"/usr/lib/python3.10/contextlib.py\", line 6, in <module>\r\n    from functools import wraps\r\n  File \"/usr/lib/python3.10/functools.py\", line 22, in <module>\r\n    from types import GenericAlias\r\n  File \"/home/florian/proj/pylint/astroid/.tox/py310/lib/python3.10/site-packages/coverage/types.py\", line 10, in <module>\r\n    from types import FrameType, ModuleType\r\nImportError: cannot import name 'FrameType' from partially initialized module 'types' (most likely due to a circular import) (/home/florian/proj/pylint/astroid/.tox/py310/lib/python3.10/site-packages/coverage/types.py)\r\n```\r\n\r\nNo idea what's adding the `site-packages/coverage/` folder to `sys.path` there? :thinking: \n\n",
  "instance_id": "pylint-dev__astroid-1963",
  "issue_numbers": [
    1960
  ],
  "language": "python",
  "patch": "diff --git a/doc/api/base_nodes.rst b/doc/api/base_nodes.rst\nindex 068c7bb669..6253ce5ce5 100644\n--- a/doc/api/base_nodes.rst\n+++ b/doc/api/base_nodes.rst\n@@ -5,34 +5,31 @@ These are abstract node classes that :ref:`other nodes <nodes>` inherit from.\n \n .. autosummary::\n \n-   astroid._base_nodes.AssignTypeNode\n+   astroid.nodes._base_nodes.AssignTypeNode\n    astroid.nodes.BaseContainer\n-   astroid._base_nodes.MultiLineWithElseBlockNode\n+   astroid.nodes._base_nodes.MultiLineWithElseBlockNode\n    astroid.nodes.ComprehensionScope\n-   astroid._base_nodes.FilterStmtsBaseNode\n-   astroid._base_nodes.ImportNode\n-   astroid.nodes.ListComp\n-   astroid.nodes.LocalsDictNodeNG\n+   astroid.nodes._base_nodes.FilterStmtsBaseNode\n+   astroid.nodes._base_nodes.ImportNode\n+     astroid.nodes.LocalsDictNodeNG\n    astroid.nodes.node_classes.LookupMixIn\n    astroid.nodes.NodeNG\n-   astroid._base_nodes.ParentAssignNode\n+   astroid.nodes._base_nodes.ParentAssignNode\n    astroid.nodes.Statement\n    astroid.nodes.Pattern\n \n \n-.. autoclass:: astroid._base_nodes.AssignTypeNode\n+.. autoclass:: astroid.nodes._base_nodes.AssignTypeNode\n \n .. autoclass:: astroid.nodes.BaseContainer\n \n-.. autoclass:: astroid._base_nodes.MultiLineWithElseBlockNode\n+.. autoclass:: astroid.nodes._base_nodes.MultiLineWithElseBlockNode\n \n .. autoclass:: astroid.nodes.ComprehensionScope\n \n-.. autoclass:: astroid._base_nodes.FilterStmtsBaseNode\n+.. autoclass:: astroid.nodes._base_nodes.FilterStmtsBaseNode\n \n-.. autoclass:: astroid._base_nodes.ImportNode\n-\n-.. autoclass:: astroid.nodes.ListComp\n+.. autoclass:: astroid.nodes._base_nodes.ImportNode\n \n .. autoclass:: astroid.nodes.LocalsDictNodeNG\n \n@@ -40,7 +37,7 @@ These are abstract node classes that :ref:`other nodes <nodes>` inherit from.\n \n .. autoclass:: astroid.nodes.NodeNG\n \n-.. autoclass:: astroid._base_nodes.ParentAssignNode\n+.. autoclass:: astroid.nodes._base_nodes.ParentAssignNode\n \n .. autoclass:: astroid.nodes.Statement\n \ndiff --git a/pyproject.toml b/pyproject.toml\nindex 3fac032e1f..8c105825f5 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -1,5 +1,5 @@\n [build-system]\n-requires = [\"setuptools~=62.6\", \"wheel~=0.37.1\"]\n+requires = [\"setuptools>=64.0\", \"wheel>=0.37.1\"]\n build-backend = \"setuptools.build_meta\"\n \n [project]\ndiff --git a/tox.ini b/tox.ini\nindex 6f77def4e3..4729e48a7e 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,67 +1,21 @@\n [tox]\n-envlist = py{37,38,39,310}\n+envlist = py{37,38,39,310,311}\n skip_missing_interpreters = true\n isolated_build = true\n \n-[testenv:pylint]\n-deps =\n-   # We do not use the latest pylint version in CI tests as we want to choose when\n-   # we fix the warnings\n-   git+https://github.com/pycqa/pylint@main\n-   pre-commit~=2.13\n-  -r requirements_test_min.txt\n-commands = pre-commit run pylint --all-files\n-\n [testenv]\n deps =\n-  -r requirements_test_min.txt\n+  -r requirements_test.txt\n   -r requirements_test_brain.txt\n-  coverage<5\n-\n-setenv =\n-    COVERAGE_FILE = {toxinidir}/.coverage.{envname}\n-\n commands =\n-    ; --pyargs is needed so the directory astroid doesn't shadow the tox\n-    ; installed astroid package\n-    ; This is important for tests' test data which create files\n-    ; inside the package\n-    python -Wi {envsitepackagesdir}/coverage run -m pytest --pyargs {posargs:tests}\n+  pytest --cov {posargs}\n \n [testenv:formatting]\n-basepython = python3\n deps =\n-    pytest\n-    git+https://github.com/pycqa/pylint@main\n-    pre-commit~=2.13\n+    -r requirements_test_pre_commit.txt\n commands =\n     pre-commit run --all-files\n \n-[testenv:coveralls]\n-setenv =\n-    COVERAGE_FILE = {toxinidir}/.coverage\n-passenv =\n-    *\n-deps =\n-    coverage<5\n-    coveralls\n-skip_install = true\n-commands =\n-    python {envsitepackagesdir}/coverage combine --append\n-    python {envsitepackagesdir}/coverage report --rcfile={toxinidir}/.coveragerc -m\n-    - coveralls --rcfile={toxinidir}/.coveragerc\n-changedir = {toxinidir}\n-\n-[testenv:coverage-erase]\n-setenv =\n-    COVERAGE_FILE = {toxinidir}/.coverage\n-deps =\n-    coverage<5\n-skip_install = true\n-commands =\n-    python {envsitepackagesdir}/coverage erase\n-changedir = {toxinidir}\n-\n [testenv:docs]\n skipsdist = True\n usedevelop = True\n",
  "problem_statement": "Running `tox` results in `ResolutionImpossible` due to coverage\nWhen trying to run `tox -e py310` in this repo on v2.13.2, I get:\r\n\r\n```\r\nCollecting coverage<5\r\n  Using cached coverage-4.5.4.tar.gz (385 kB)\r\n  Preparing metadata (setup.py): started\r\n  Preparing metadata (setup.py): finished with status 'done'\r\nERROR: Cannot install coverage<5 and coverage~=7.0 because these package versions have conflicting dependencies.\r\n\r\nThe conflict is caused by:\r\n    The user requested coverage<5\r\n    The user requested coverage~=7.0\r\n\r\nTo fix this you could try to:\r\n1. loosen the range of package versions you've specified\r\n2. remove package versions to allow pip attempt to solve the dependency conflict\r\n\r\nERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts\r\n```\r\n\r\nand indeed, `tox.ini` specifies:\r\n\r\nhttps://github.com/PyCQA/astroid/blob/49691cc04f2d38b174787280f7ed38f818c828bd/tox.ini#L16-L19\r\n\r\nbut the `requirements_test_min.txt` mentioned there wants:\r\n\r\nhttps://github.com/PyCQA/astroid/blob/49691cc04f2d38b174787280f7ed38f818c828bd/requirements_test_min.txt#L1\r\n\r\nIt looks like this was pinned over 3 years ago in 128a6ddeddeb817706b3b4a7d5eecb916b9da5d1, and adding it to `requirements_test_min.txt` in 15d2067bcc102e8bdf58d1428d17dcf5b8d6ad28 broke things.\n",
  "pull_number": 1963,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/requirements_test.txt b/requirements_test.txt\nindex 48f5cc863f..6e32914961 100644\n--- a/requirements_test.txt\n+++ b/requirements_test.txt\n@@ -1,7 +1,6 @@\n -r requirements_test_min.txt\n -r requirements_test_pre_commit.txt\n contributors-txt>=0.7.4\n-pre-commit~=2.21\n tbump~=6.9.0\n types-typed-ast; implementation_name==\"cpython\" and python_version<\"3.8\"\n types-pkg_resources==0.1.3\ndiff --git a/requirements_test_pre_commit.txt b/requirements_test_pre_commit.txt\nindex 8af6f02b21..dd3aeeba26 100644\n--- a/requirements_test_pre_commit.txt\n+++ b/requirements_test_pre_commit.txt\n@@ -1,3 +1,4 @@\n+-r requirements_test_min.txt\n black==23.1.0\n pylint==2.16.1\n isort==5.12.0;python_version>='3.8'\n@@ -5,3 +6,4 @@ flake8==6.0.0;python_version>='3.8'\n flake8-typing-imports==1.14.0;python_version>='3.8'\n flake8-bugbear==22.10.27;python_version>='3.8'\n mypy==0.991\n+pre-commit~=2.21\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/844d5459ad018abde0a1db54109f8f99fc19cf86"
}