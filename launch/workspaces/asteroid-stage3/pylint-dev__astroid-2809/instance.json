{
  "all_hints_text": "\n\n",
  "base_commit": "f7c8b4cbdc30f3bfbff3d3d5e7340a52f2f8c315",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/e47e3b8a2283559d6918a3c02689f6b821562b6b",
    "https://github.com/pylint-dev/astroid/commit/c93f6a704db57654fe820041d59f85a9fa496e86",
    "https://github.com/pylint-dev/astroid/commit/cf2227a8dd6d4aae2d7bb05ab07611c80a5b9de2"
  ],
  "created_at": "2025-08-28T09:36:38Z",
  "hints_text": "\n\n",
  "instance_id": "pylint-dev__astroid-2809",
  "issue_numbers": [
    2643
  ],
  "language": "python",
  "patch": "diff --git a/ChangeLog b/ChangeLog\nindex 47bb4d19b..379a2a748 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -7,6 +7,10 @@ What's New in astroid 4.0.0?\n ============================\n Release date: TBA\n \n+* Prevent crash when parsing deeply nested parentheses causing MemoryError in python's built-in ast.\n+\n+  Closes #2643\n+\n * Fix crash when inferring namedtuple with invalid field name looking like f-string formatting.\n \n   Closes #2519\ndiff --git a/astroid/builder.py b/astroid/builder.py\nindex 6205f83d4..a107fed99 100644\n--- a/astroid/builder.py\n+++ b/astroid/builder.py\n@@ -181,7 +181,7 @@ def _data_build(\n             node, parser_module = _parse_string(\n                 data, type_comments=True, modname=modname\n             )\n-        except (TypeError, ValueError, SyntaxError) as exc:\n+        except (TypeError, ValueError, SyntaxError, MemoryError) as exc:\n             raise AstroidSyntaxError(\n                 \"Parsing Python code failed:\\n{error}\",\n                 source=data,\n",
  "problem_statement": "MemoryError when parsing deeply nested parentheses\n### Steps to reproduce\n\nThe following code triggers a `MemoryError` in astroid:\n\n```python\nA=((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((c,j=t\n```\n\nThis bug was discovered by OSS-Fuzz:\nhttps://issues.oss-fuzz.com/issues/380930688 (report not public yet)\n\n### Current behavior\n```\nTraceback (most recent call last):\n  File \"pylint/pylint/lint/pylinter.py\", line 976, in get_ast\n    return MANAGER.ast_from_file(filepath, modname, source=True)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/manager.py\", line 167, in ast_from_file\n    return AstroidBuilder(self).file_build(filepath, modname)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/builder.py\", line 144, in file_build\n    module, builder = self._data_build(data, modname, path)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/builder.py\", line 181, in _data_build\n    node, parser_module = _parse_string(\n                          ^^^^^^^^^^^^^^\n  File \"astroid/astroid/builder.py\", line 476, in _parse_string\n    parsed = parser_module.parse(\n             ^^^^^^^^^^^^^^^^^^^^\n  File \"astroid/astroid/_ast.py\", line 29, in parse\n    return ast.parse(string, filename=filename, type_comments=type_comments)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/ast.py\", line 52, in parse\n    return compile(source, filename, mode, flags,\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nMemoryError: Parser stack overflowed - Python source too complex to parse\n```\n\n### Expected behavior\nPython also raises a `MemoryError` when trying to run the fuzzed `A=(((...` code, but maybe astroid can handle `ast.parse` failures more gracefully?\n\n### Version\n9efc8274460b584092\n",
  "pull_number": 2809,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/test_regrtest.py b/tests/test_regrtest.py\nindex 1b16662c6..0ff3b6f52 100644\n--- a/tests/test_regrtest.py\n+++ b/tests/test_regrtest.py\n@@ -2,6 +2,7 @@\n # For details: https://github.com/pylint-dev/astroid/blob/main/LICENSE\n # Copyright (c) https://github.com/pylint-dev/astroid/blob/main/CONTRIBUTORS.txt\n \n+import platform\n import sys\n import textwrap\n import unittest\n@@ -13,7 +14,7 @@\n from astroid.builder import AstroidBuilder, _extract_single_node, extract_node\n from astroid.const import PY312_PLUS\n from astroid.context import InferenceContext\n-from astroid.exceptions import InferenceError\n+from astroid.exceptions import AstroidSyntaxError, InferenceError\n from astroid.manager import AstroidManager\n from astroid.raw_building import build_module\n from astroid.util import Uninferable\n@@ -561,3 +562,15 @@ def test_regression_infer_namedtuple_invalid_fieldname_error() -> None:\n     node = extract_node(code)\n     inferred = next(node.infer())\n     assert inferred.value == Uninferable\n+\n+\n+def test_regression_parse_deeply_nested_parentheses() -> None:\n+    \"\"\"Regression test for issue #2643.\"\"\"\n+    with pytest.raises(AstroidSyntaxError, match=\"Parsing Python code failed:\") as ctx:\n+        extract_node(\n+            \"A=((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((c,j=t\"\n+        )\n+    expected = (\n+        SyntaxError if platform.python_implementation() == \"PyPy\" else MemoryError\n+    )\n+    assert isinstance(ctx.value.error, expected)\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/f7c8b4cbdc30f3bfbff3d3d5e7340a52f2f8c315"
}