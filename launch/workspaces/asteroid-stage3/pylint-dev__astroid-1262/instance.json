{
  "all_hints_text": "> but I thought we wanted these to be accessible on all nodes, just initialised as None.\r\n\r\nYeah, that was the idea initially.\r\n\r\n> `AttributeError` on both of the last lines.\r\n\r\nFor now a workaround would be to use `hasattr(node, \"end_lineno\")`. Not pretty but it should do. That should unblock https://github.com/PyCQA/pylint/pull/5343.\r\n\r\n--\r\nWe could try to address it  in #1262. The issue are these lines here\r\nhttps://github.com/PyCQA/astroid/blob/775c8f7acb97e50cd643b6e1a20042aa8cfa98a3/astroid/nodes/scoped_nodes.py#L472-L475\r\ncombined with the missing `super().__init__()` call.\r\nI noticed just now that the `lineno` for `Module` is set to `0`. The type annotation thus doesn't make sense.\r\nhttps://github.com/PyCQA/astroid/blob/775c8f7acb97e50cd643b6e1a20042aa8cfa98a3/astroid/nodes/scoped_nodes.py#L387-L396\r\n\r\nThere could also be an argument that it should be `lineno = 1` instead. As all are `1-indexed`.\n\n",
  "base_commit": "e840a7c54d3d8b5be2db1e66f34a5368c64fc3f7",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/dbe50556d926d02ac3dca62dc778679597ed3afc",
    "https://github.com/pylint-dev/astroid/commit/77ba9a31916f896ebc32a87caff87d3d7165ea6d",
    "https://github.com/pylint-dev/astroid/commit/dd491d09cd57cdf2f62a6694c3b93c75dcfb184a",
    "https://github.com/pylint-dev/astroid/commit/d2a206e612c0f5d7d03b2655caa1d90633eb1916",
    "https://github.com/pylint-dev/astroid/commit/835b266a180102fc7fec42484e335a0a2f81fc72",
    "https://github.com/pylint-dev/astroid/commit/da985f3a6fa0326a0f192d85bfd51fed873d9a5f",
    "https://github.com/pylint-dev/astroid/commit/71f0ae44796c4367779abbd46d9f8d2314ae5fd9",
    "https://github.com/pylint-dev/astroid/commit/21ece44aeec473d43bd36ad7c33fa634bf68d586",
    "https://github.com/pylint-dev/astroid/commit/002fdc1242ab2a58bbff7a184b1362005123ff40",
    "https://github.com/pylint-dev/astroid/commit/e4c31d7f493114868002ebfbd98c7c522073d286",
    "https://github.com/pylint-dev/astroid/commit/54bb3dd706926e05ba6c126ecf454a54e1bfeb72",
    "https://github.com/pylint-dev/astroid/commit/757205a276d3d374ab4f1c8c38802637fabb83f9",
    "https://github.com/pylint-dev/astroid/commit/2700a1347c3d110c1d75d1701e3761c9d905c3e9"
  ],
  "created_at": "2021-11-19T16:46:31Z",
  "hints_text": "\n\n",
  "instance_id": "pylint-dev__astroid-1262",
  "issue_numbers": [
    1273
  ],
  "language": "python",
  "patch": "diff --git a/ChangeLog b/ChangeLog\nindex 3b026ba905..9641cf0441 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -18,6 +18,9 @@ Release date: TBA\n \n   Closes #1260\n \n+* Fix ``Module`` nodes not having a ``col_offset``, ``end_lineno``, and ``end_col_offset``\n+  attributes.\n+\n * Fix typing and update explanation for ``Arguments.args`` being ``None``.\n \n * Fix crash if a variable named ``type`` is subscripted in a generator expression.\ndiff --git a/astroid/nodes/scoped_nodes.py b/astroid/nodes/scoped_nodes.py\nindex 0c745a4fca..96a034c868 100644\n--- a/astroid/nodes/scoped_nodes.py\n+++ b/astroid/nodes/scoped_nodes.py\n@@ -389,10 +389,8 @@ class Module(LocalsDictNodeNG):\n \n     :type: int or None\n     \"\"\"\n-    lineno = 0\n+    lineno: Literal[0] = 0\n     \"\"\"The line that this node appears on in the source code.\n-\n-    :type: int or None\n     \"\"\"\n \n     # attributes below are set by the builder module or by raw factories\n@@ -469,7 +467,6 @@ class Module(LocalsDictNodeNG):\n     )\n     _other_other_fields = (\"locals\", \"globals\")\n \n-    lineno: None\n     col_offset: None\n     end_lineno: None\n     end_col_offset: None\n@@ -512,7 +509,6 @@ def __init__(\n         self.file = file\n         self.path = path\n         self.package = package\n-        self.parent = parent\n         self.pure_python = pure_python\n         self.locals = self.globals = {}\n         \"\"\"A map of the name of a local variable to the node defining the local.\n@@ -526,6 +522,8 @@ def __init__(\n         \"\"\"\n         self.future_imports = set()\n \n+        super().__init__(lineno=0, parent=parent)\n+\n     # pylint: enable=redefined-builtin\n \n     def postinit(self, body=None):\n",
  "problem_statement": "``nodes.Module`` don't have a ``end_lineno`` and ``end_col_offset``\n### Steps to reproduce\r\n\r\n```python\r\nimport astroid\r\n\r\ncode = \"\"\"\r\n    print(\"a module\")\r\n    \"\"\"\r\n\r\nmodule = astroid.parse(code)\r\nprint(module.end_lineno)\r\nprint(module.end_col_offset)\r\n```\r\n\r\n### Current behavior\r\n\r\n`AttributeError` on both of the last lines.\r\n\r\n### Expected behavior\r\n\r\n@cdce8p Let me know if I misunderstood you, but I thought we wanted these to be accessible on all nodes, just initialised as `None`.\r\nIf that was not the case, I would make the case to do so as it allows you to do `node.end_lineno` without running in to `AttributeError`'s.\r\n\r\n### Version\r\n\r\nLatest `main`.\r\n\n",
  "pull_number": 1262,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/unittest_nodes_lineno.py b/tests/unittest_nodes_lineno.py\nindex 75d664dc48..73cf0207cc 100644\n--- a/tests/unittest_nodes_lineno.py\n+++ b/tests/unittest_nodes_lineno.py\n@@ -2,6 +2,7 @@\n \n import pytest\n \n+import astroid\n from astroid import builder, nodes\n from astroid.const import PY38_PLUS, PY39_PLUS, PY310_PLUS\n \n@@ -1221,3 +1222,14 @@ class X(Parent, var=42):\n         assert (c1.body[0].lineno, c1.body[0].col_offset) == (4, 4)\n         assert (c1.body[0].end_lineno, c1.body[0].end_col_offset) == (4, 8)\n         # fmt: on\n+\n+    @staticmethod\n+    def test_end_lineno_module() -> None:\n+        \"\"\"Tests for Module\"\"\"\n+        code = \"\"\"print()\"\"\"\n+        module = astroid.parse(code)\n+        assert isinstance(module, nodes.Module)\n+        assert module.lineno == 0\n+        assert module.col_offset is None\n+        assert module.end_lineno is None\n+        assert module.end_col_offset is None\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/e840a7c54d3d8b5be2db1e66f34a5368c64fc3f7"
}