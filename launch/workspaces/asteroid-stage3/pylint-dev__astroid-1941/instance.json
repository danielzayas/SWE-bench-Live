{
  "all_hints_text": "@Pierre-Sassoulas Shall we release a hot fix and `yank` 2.13.0? This seems truly broken.\nYeah definitely. I'm on mobile right now so I can't release. Also th\u00e9 maintenance branche is not ready sorry. But we Can release directly from main in this case\nI'm on mobile as well. No rush as it is the weekend and we haven't release `pylint` yet \ud83d\ude04 \nThis doesn't seem to be fixed yet. typing-extensions isn't installed on Python 3.10 due to the Python version check here: https://github.com/PyCQA/astroid/blob/82b80d9c588e394afe9c61165b484a0944a4b352/pyproject.toml#L39\r\n\r\nSample job output:\r\nhttps://github.com/nicotine-plus/nicotine-plus/actions/runs/3863997823/jobs/6591410278\nThank you for the head up @mathiascode, it was due to ``typing-extensions`` also being present in our tests requirements with laxer constraints hiding the issue, see #1944 \nThanks for the fix, much appreciated!\n\n",
  "base_commit": "fc5c93c66e9507e0590ebef10a9c528a8c345859",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/703cc0be8528af19545db7f1bb91084835ddbb0c"
  ],
  "created_at": "2023-01-08T02:22:20Z",
  "hints_text": "\n\n",
  "instance_id": "pylint-dev__astroid-1941",
  "issue_numbers": [
    1942
  ],
  "language": "python",
  "patch": "diff --git a/pyproject.toml b/pyproject.toml\nindex 576502bf40..5daeca1952 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -36,7 +36,7 @@ dependencies = [\n     \"wrapt>=1.14,<2;python_version>='3.11'\",\n     \"wrapt>=1.11,<2;python_version<'3.11'\",\n     \"typed-ast>=1.4.0,<2.0;implementation_name=='cpython' and python_version<'3.8'\",\n-    \"typing-extensions>=3.10;python_version<'3.10'\",\n+    \"typing-extensions>=4.0.0;python_version<'3.10'\",\n ]\n dynamic = [\"version\"]\n \n",
  "problem_statement": "astroid 2.13.0 uses typing_extensions on Python 3.10 but does not require it there\n### Steps to reproduce\r\n\r\nIn a virtual Python environment with Python 3.10 that does not have typing_extensions installed:\r\n\r\n1. `pip install pylint`\r\n2. `pylint --version`\r\n\r\nThis only happens on Python 3.10, not on <=3.9 or 3.11\r\n\r\nTest runs with different OS and Python versions: https://github.com/pywbem/nocaselist/actions/runs/3864593150\r\n \r\n### Current behavior\r\n\r\nPylint fails with astroid trying to import from typing_extensions. However, typing_extensions is not installed because astroid 2.13.0 does not require it in its distribution on Python 3.10:\r\n\r\n```\r\n$ pylint --version\r\nTraceback (most recent call last):\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/bin/pylint\", line 8, in <module>\r\n    sys.exit(run_pylint())\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/pylint/__init__.py\", line 32, in run_pylint\r\n    from pylint.lint import Run as PylintRun\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/pylint/lint/__init__.py\", line 19, in <module>\r\n    from pylint.config.exceptions import ArgumentPreprocessingError\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/pylint/config/__init__.py\", line 25, in <module>\r\n    from pylint.config.arguments_provider import UnsupportedAction\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/pylint/config/arguments_provider.py\", line 15, in <module>\r\n    from pylint.config.arguments_manager import _ArgumentsManager\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/pylint/config/arguments_manager.py\", line 25, in <module>\r\n    from pylint import utils\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/pylint/utils/__init__.py\", line 9, in <module>\r\n    from pylint.utils.ast_walker import ASTWalker\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/pylint/utils/ast_walker.py\", line 13, in <module>\r\n    from astroid import nodes\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/astroid/__init__.py\", line 46, in <module>\r\n    from astroid import inference, raw_building\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/astroid/inference.py\", line 18, in <module>\r\n    from astroid import bases, constraint, decorators, helpers, nodes, protocols, util\r\n  File \"/Users/maiera/virtualenvs/nocaselist310/lib/python3.10/site-packages/astroid/constraint.py\", line 19, in <module>\r\n    from typing_extensions import Self\r\nModuleNotFoundError: No module named 'typing_extensions'\r\n```\r\n\r\n### Expected behavior\r\n\r\nshould not fail\r\n\r\nLooking at the requirement for typing_extensions in pyproject.toml and at the import in astroid/constraints.py, it seems that a mismatch of the Python version between those two for Python 3.10 is the reason for the issue.\r\n \r\n### `python -c \"from astroid import __pkginfo__; print(__pkginfo__.version)\"` output\r\n\r\nThis command does not work on Python 3.10 because of missing typing_extensions.\r\nWhen installing typing_extensions manually, it shows:\r\n```\r\n2.13.0\r\n```\r\n\r\n### `pipdeptree -p pylint` output\r\n\r\n```\r\npylint==2.15.9\r\n  - astroid [required: >=2.12.13,<=2.14.0-dev0, installed: 2.13.0]\r\n    - lazy-object-proxy [required: >=1.4.0, installed: 1.9.0]\r\n    - wrapt [required: >=1.11,<2, installed: 1.14.1]\r\n  - dill [required: >=0.2, installed: 0.3.6]\r\n  - isort [required: >=4.2.5,<6, installed: 5.11.4]\r\n  - mccabe [required: >=0.6,<0.8, installed: 0.7.0]\r\n  - platformdirs [required: >=2.2.0, installed: 2.6.2]\r\n  - tomli [required: >=1.1.0, installed: 2.0.1]\r\n  - tomlkit [required: >=0.10.1, installed: 0.11.6]\r\n```\r\n\n",
  "pull_number": 1941,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/requirements_test_min.txt b/requirements_test_min.txt\nindex 253990cd85..c8c3637a51 100644\n--- a/requirements_test_min.txt\n+++ b/requirements_test_min.txt\n@@ -1,4 +1,4 @@\n coverage~=7.0\n pytest\n pytest-cov~=4.0\n-typing-extensions>=3.10\n+typing-extensions>=4.0.0\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/fc5c93c66e9507e0590ebef10a9c528a8c345859"
}