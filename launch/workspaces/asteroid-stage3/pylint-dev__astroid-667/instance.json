{
  "all_hints_text": "This sounds like a sensible suggestion, makes sense having it.\n\n",
  "base_commit": "e0a298df55b15abcb77c2a93253f5ab7be52d0fb",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/d5248a76b9a64f2d720b072ee0d356b69d714193"
  ],
  "created_at": "2019-05-01T04:56:57Z",
  "hints_text": "This sounds like a sensible suggestion, makes sense having it.\n\n",
  "instance_id": "pylint-dev__astroid-667",
  "issue_numbers": [
    665
  ],
  "language": "python",
  "patch": "diff --git a/ChangeLog b/ChangeLog\nindex 1a4e4eff5f..5b21c00b3a 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -51,6 +51,10 @@ Release Date: TBA\n   Close PyCQA/pylint#2734\n   Close PyCQA/pylint#2740\n \n+* Can access per argument type comments through new ``Arguments.type_comment_args`` attribute.\n+\n+  Close #665\n+\n \n What's New in astroid 2.2.0?\n ============================\ndiff --git a/astroid/node_classes.py b/astroid/node_classes.py\nindex 449470d0fd..2e39b06010 100644\n--- a/astroid/node_classes.py\n+++ b/astroid/node_classes.py\n@@ -1425,6 +1425,7 @@ class Arguments(mixins.AssignTypeMixin, NodeNG):\n         \"varargannotation\",\n         \"kwargannotation\",\n         \"kwonlyargs_annotations\",\n+        \"type_comment_args\",\n     )\n     varargannotation = None\n     \"\"\"The type annotation for the variable length arguments.\n@@ -1499,6 +1500,15 @@ def __init__(self, vararg=None, kwarg=None, parent=None):\n         :type: list(NodeNG)\n         \"\"\"\n \n+        self.type_comment_args = []\n+        \"\"\"The type annotation, passed by a type comment, of each argument.\n+\n+        If an argument does not have a type comment,\n+        the value for that argument will be None.\n+\n+        :type: list(NodeNG or None)\n+        \"\"\"\n+\n     def postinit(\n         self,\n         args,\n@@ -1509,6 +1519,7 @@ def postinit(\n         kwonlyargs_annotations=None,\n         varargannotation=None,\n         kwargannotation=None,\n+        type_comment_args=None,\n     ):\n         \"\"\"Do some setup after initialisation.\n \n@@ -1543,6 +1554,10 @@ def postinit(\n         :param kwargannotation: The type annotation for the variable length\n             keyword arguments.\n         :type kwargannotation: NodeNG\n+\n+        :param type_comment_args: The type annotation,\n+            passed by a type comment, of each argument.\n+        :type type_comment_args: list(NodeNG or None)\n         \"\"\"\n         self.args = args\n         self.defaults = defaults\n@@ -1552,6 +1567,7 @@ def postinit(\n         self.kwonlyargs_annotations = kwonlyargs_annotations\n         self.varargannotation = varargannotation\n         self.kwargannotation = kwargannotation\n+        self.type_comment_args = type_comment_args\n \n     def _infer_name(self, frame, name):\n         if self.parent is frame:\ndiff --git a/astroid/rebuilder.py b/astroid/rebuilder.py\nindex 1b313ee241..c18893d857 100644\n--- a/astroid/rebuilder.py\n+++ b/astroid/rebuilder.py\n@@ -220,6 +220,7 @@ def visit_arguments(self, node, parent):\n             kw_defaults = []\n             annotations = []\n             kwonlyargs_annotations = []\n+        type_comment_args = [self.check_type_comment(child) for child in node.args]\n \n         newnode.postinit(\n             args=args,\n@@ -230,6 +231,7 @@ def visit_arguments(self, node, parent):\n             kwonlyargs_annotations=kwonlyargs_annotations,\n             varargannotation=varargannotation,\n             kwargannotation=kwargannotation,\n+            type_comment_args=type_comment_args,\n         )\n         # save argument names in locals:\n         if vararg:\n",
  "problem_statement": "Expose multi-line function argument type annotation comments\n### Feature Request\r\nSay we are parsing the following function:\r\n\r\n```python\r\ndef sum(\r\n        a,  # type: int\r\n        b,  # type: int\r\n):\r\n    # type: (...) -> int\r\n    return a + b\r\n```\r\n\r\nThere is no way to access the type annotation comments for the individual `a` and `b` arguments, only the function itself.\r\n`typed_ast` exposes these type comments through the attribute `type_comment` on each `arg` node:\r\n\r\n```python\r\n>>> import typed_ast\r\n>>> module = typed_ast.ast3.parse('''def sum(\\n    a,  # type: int\\n    b,  # type: int\\n    ):\\n    # type: (...) -> int\\n    return a + b''')\r\n>>> module.body[0].args.args\r\n[<typed_ast._ast3.arg object at 0x7f318d7cd0b8>, <typed_ast._ast3.arg object at 0x7f318d7cd0f0>]\r\n>>> module.body[0].args.args[0].type_comment\r\n'int'\r\n```\r\n\r\n### Desired behavior\r\nWe could add a `type_annotation` attribute to the `AssignName` node, but for regular assignments this is redundant information because type comments are exposed on the parent `Assign` node.\r\nSo the parent `Arguments` node seems like the right place for it to go. I'm proposing the addition of a `type_comment_args` attribute on the `Arguments` node that contains a list of the type comments, one for each argument using a None for arguments that are missing a comment.\r\n\r\n### ``python -c \"from astroid import __pkginfo__; print(__pkginfo__.version)\"`` output\r\n\r\n2.2.5\n",
  "pull_number": 667,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/astroid/tests/unittest_nodes.py b/astroid/tests/unittest_nodes.py\nindex 7d747affe1..800eef3aff 100644\n--- a/astroid/tests/unittest_nodes.py\n+++ b/astroid/tests/unittest_nodes.py\n@@ -1023,6 +1023,45 @@ def func2():\n         assert node.type_comment_returns.as_string() == expected_returns_string\n \n \n+@pytest.mark.skipif(not HAS_TYPED_AST, reason=\"requires typed_ast\")\n+def test_type_comments_arguments():\n+    module = builder.parse(\n+        \"\"\"\n+    def func(\n+        a,  # type: int\n+    ):\n+        # type: (...) -> str\n+        pass\n+    def func1(\n+        a,  # type: int\n+        b,  # type: int\n+        c,  # type: int\n+    ):\n+        # type: (...) -> (str, str)\n+        pass\n+    def func2(\n+        a,  # type: int\n+        b,  # type: int\n+        c,  # type: str\n+        d,  # type: List[int]\n+    ):\n+        # type: (...) -> List[int]\n+        pass\n+    \"\"\"\n+    )\n+    expected_annotations = [\n+        [\"int\"],\n+        [\"int\", \"int\", \"int\"],\n+        [\"int\", \"int\", \"str\", \"List[int]\"],\n+    ]\n+    for node, expected_args in zip(module.body, expected_annotations):\n+        assert len(node.type_comment_args) == 1\n+        assert isinstance(node.type_comment_args[0], astroid.Ellipsis)\n+        assert len(node.args.type_comment_args) == len(expected_args)\n+        for expected_arg, actual_arg in zip(expected_args, node.args.type_comment_args):\n+            assert actual_arg.as_string() == expected_arg\n+\n+\n def test_is_generator_for_yield_assignments():\n     node = astroid.extract_node(\n         \"\"\"\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/e0a298df55b15abcb77c2a93253f5ab7be52d0fb"
}