{
  "all_hints_text": "Option 4 seems best to me. I would even be okay with completely removing the weird behaviour described in point 2 and adding a new function that `pyreverse` can use. Imo, if we have a clear changelog entry for this it shouldn't be considered a breaking change, it is very weird that that behaviour exists in the first place.\r\n\r\nPlease go ahead with the PR! Any work on `astroid` is always highly appreciated!\n\n",
  "base_commit": "56a65daf1ba391cc85d1a32a8802cfd0c7b7b2ab",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/f20698ac9deed92b8e773062d6713979894176b2",
    "https://github.com/pylint-dev/astroid/commit/5640e55fcc00cc5020de4b99ef51f1298de5fad1",
    "https://github.com/pylint-dev/astroid/commit/75c6ca85dd997b3d7740aab4d18f65ea250f87b3",
    "https://github.com/pylint-dev/astroid/commit/3eccad77e02d338937d4b4a09034fa175d8e424d",
    "https://github.com/pylint-dev/astroid/commit/b330d40797ce768bed22a240f36505fb9f84115c"
  ],
  "created_at": "2023-02-08T15:09:47Z",
  "hints_text": "Option 4 seems best to me. I would even be okay with completely removing the weird behaviour described in point 2 and adding a new function that `pyreverse` can use. Imo, if we have a clear changelog entry for this it shouldn't be considered a breaking change, it is very weird that that behaviour exists in the first place.\r\n\r\nPlease go ahead with the PR! Any work on `astroid` is always highly appreciated!\n\n",
  "instance_id": "pylint-dev__astroid-2015",
  "issue_numbers": [
    2012
  ],
  "language": "python",
  "patch": "diff --git a/ChangeLog b/ChangeLog\nindex b696393fb2..6282119e9b 100644\n--- a/ChangeLog\n+++ b/ChangeLog\n@@ -18,6 +18,12 @@ Release date: TBA\n \n   Closes #1680\n \n+* Deprecate ``modutils.is_standard_module()``. It will be removed in the next minor release.\n+  Functionality has been replaced by two new functions,\n+  ``modutils.is_stdlib_module()`` and ``modutils.module_in_path()``.\n+\n+  Closes #2012\n+\n \n What's New in astroid 2.14.2?\n =============================\ndiff --git a/astroid/_backport_stdlib_names.py b/astroid/_backport_stdlib_names.py\nnew file mode 100644\nindex 0000000000..51d6957d10\n--- /dev/null\n+++ b/astroid/_backport_stdlib_names.py\n@@ -0,0 +1,356 @@\n+# Licensed under the LGPL: https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html\n+# For details: https://github.com/PyCQA/astroid/blob/main/LICENSE\n+# Copyright (c) https://github.com/PyCQA/astroid/blob/main/CONTRIBUTORS.txt\n+\n+\"\"\"\n+Shim to support Python versions < 3.10 that don't have sys.stdlib_module_names\n+\n+These values were created by cherry-picking the commits from\n+https://bugs.python.org/issue42955 into each version, but may be updated\n+manually if changes are needed.\n+\"\"\"\n+\n+import sys\n+\n+# TODO: Remove this file when Python 3.9 is no longer supported\n+\n+PY_3_7 = frozenset(\n+    {\n+        \"__future__\",\n+        \"_abc\",\n+        \"_ast\",\n+        \"_asyncio\",\n+        \"_bisect\",\n+        \"_blake2\",\n+        \"_bootlocale\",\n+        \"_bz2\",\n+        \"_codecs\",\n+        \"_codecs_cn\",\n+        \"_codecs_hk\",\n+        \"_codecs_iso2022\",\n+        \"_codecs_jp\",\n+        \"_codecs_kr\",\n+        \"_codecs_tw\",\n+        \"_collections\",\n+        \"_collections_abc\",\n+        \"_compat_pickle\",\n+        \"_compression\",\n+        \"_contextvars\",\n+        \"_crypt\",\n+        \"_csv\",\n+        \"_ctypes\",\n+        \"_curses\",\n+        \"_curses_panel\",\n+        \"_datetime\",\n+        \"_dbm\",\n+        \"_decimal\",\n+        \"_dummy_thread\",\n+        \"_elementtree\",\n+        \"_functools\",\n+        \"_gdbm\",\n+        \"_hashlib\",\n+        \"_heapq\",\n+        \"_imp\",\n+        \"_io\",\n+        \"_json\",\n+        \"_locale\",\n+        \"_lsprof\",\n+        \"_lzma\",\n+        \"_markupbase\",\n+        \"_md5\",\n+        \"_msi\",\n+        \"_multibytecodec\",\n+        \"_multiprocessing\",\n+        \"_opcode\",\n+        \"_operator\",\n+        \"_osx_support\",\n+        \"_pickle\",\n+        \"_posixsubprocess\",\n+        \"_py_abc\",\n+        \"_pydecimal\",\n+        \"_pyio\",\n+        \"_queue\",\n+        \"_random\",\n+        \"_sha1\",\n+        \"_sha256\",\n+        \"_sha3\",\n+        \"_sha512\",\n+        \"_signal\",\n+        \"_sitebuiltins\",\n+        \"_socket\",\n+        \"_sqlite3\",\n+        \"_sre\",\n+        \"_ssl\",\n+        \"_stat\",\n+        \"_string\",\n+        \"_strptime\",\n+        \"_struct\",\n+        \"_symtable\",\n+        \"_thread\",\n+        \"_threading_local\",\n+        \"_tkinter\",\n+        \"_tracemalloc\",\n+        \"_uuid\",\n+        \"_warnings\",\n+        \"_weakref\",\n+        \"_weakrefset\",\n+        \"_winapi\",\n+        \"abc\",\n+        \"aifc\",\n+        \"antigravity\",\n+        \"argparse\",\n+        \"array\",\n+        \"ast\",\n+        \"asynchat\",\n+        \"asyncio\",\n+        \"asyncore\",\n+        \"atexit\",\n+        \"audioop\",\n+        \"base64\",\n+        \"bdb\",\n+        \"binascii\",\n+        \"binhex\",\n+        \"bisect\",\n+        \"builtins\",\n+        \"bz2\",\n+        \"cProfile\",\n+        \"calendar\",\n+        \"cgi\",\n+        \"cgitb\",\n+        \"chunk\",\n+        \"cmath\",\n+        \"cmd\",\n+        \"code\",\n+        \"codecs\",\n+        \"codeop\",\n+        \"collections\",\n+        \"colorsys\",\n+        \"compileall\",\n+        \"concurrent\",\n+        \"configparser\",\n+        \"contextlib\",\n+        \"contextvars\",\n+        \"copy\",\n+        \"copyreg\",\n+        \"crypt\",\n+        \"csv\",\n+        \"ctypes\",\n+        \"curses\",\n+        \"dataclasses\",\n+        \"datetime\",\n+        \"dbm\",\n+        \"decimal\",\n+        \"difflib\",\n+        \"dis\",\n+        \"distutils\",\n+        \"doctest\",\n+        \"dummy_threading\",\n+        \"email\",\n+        \"encodings\",\n+        \"ensurepip\",\n+        \"enum\",\n+        \"errno\",\n+        \"faulthandler\",\n+        \"fcntl\",\n+        \"filecmp\",\n+        \"fileinput\",\n+        \"fnmatch\",\n+        \"formatter\",\n+        \"fractions\",\n+        \"ftplib\",\n+        \"functools\",\n+        \"gc\",\n+        \"genericpath\",\n+        \"getopt\",\n+        \"getpass\",\n+        \"gettext\",\n+        \"glob\",\n+        \"grp\",\n+        \"gzip\",\n+        \"hashlib\",\n+        \"heapq\",\n+        \"hmac\",\n+        \"html\",\n+        \"http\",\n+        \"idlelib\",\n+        \"imaplib\",\n+        \"imghdr\",\n+        \"imp\",\n+        \"importlib\",\n+        \"inspect\",\n+        \"io\",\n+        \"ipaddress\",\n+        \"itertools\",\n+        \"json\",\n+        \"keyword\",\n+        \"lib2to3\",\n+        \"linecache\",\n+        \"locale\",\n+        \"logging\",\n+        \"lzma\",\n+        \"macpath\",\n+        \"mailbox\",\n+        \"mailcap\",\n+        \"marshal\",\n+        \"math\",\n+        \"mimetypes\",\n+        \"mmap\",\n+        \"modulefinder\",\n+        \"msilib\",\n+        \"msvcrt\",\n+        \"multiprocessing\",\n+        \"netrc\",\n+        \"nis\",\n+        \"nntplib\",\n+        \"nt\",\n+        \"ntpath\",\n+        \"nturl2path\",\n+        \"numbers\",\n+        \"opcode\",\n+        \"operator\",\n+        \"optparse\",\n+        \"os\",\n+        \"ossaudiodev\",\n+        \"parser\",\n+        \"pathlib\",\n+        \"pdb\",\n+        \"pickle\",\n+        \"pickletools\",\n+        \"pipes\",\n+        \"pkgutil\",\n+        \"platform\",\n+        \"plistlib\",\n+        \"poplib\",\n+        \"posix\",\n+        \"posixpath\",\n+        \"pprint\",\n+        \"profile\",\n+        \"pstats\",\n+        \"pty\",\n+        \"pwd\",\n+        \"py_compile\",\n+        \"pyclbr\",\n+        \"pydoc\",\n+        \"pydoc_data\",\n+        \"pyexpat\",\n+        \"queue\",\n+        \"quopri\",\n+        \"random\",\n+        \"re\",\n+        \"readline\",\n+        \"reprlib\",\n+        \"resource\",\n+        \"rlcompleter\",\n+        \"runpy\",\n+        \"sched\",\n+        \"secrets\",\n+        \"select\",\n+        \"selectors\",\n+        \"shelve\",\n+        \"shlex\",\n+        \"shutil\",\n+        \"signal\",\n+        \"site\",\n+        \"smtpd\",\n+        \"smtplib\",\n+        \"sndhdr\",\n+        \"socket\",\n+        \"socketserver\",\n+        \"spwd\",\n+        \"sqlite3\",\n+        \"sre_compile\",\n+        \"sre_constants\",\n+        \"sre_parse\",\n+        \"ssl\",\n+        \"stat\",\n+        \"statistics\",\n+        \"string\",\n+        \"stringprep\",\n+        \"struct\",\n+        \"subprocess\",\n+        \"sunau\",\n+        \"symbol\",\n+        \"symtable\",\n+        \"sys\",\n+        \"sysconfig\",\n+        \"syslog\",\n+        \"tabnanny\",\n+        \"tarfile\",\n+        \"telnetlib\",\n+        \"tempfile\",\n+        \"termios\",\n+        \"textwrap\",\n+        \"this\",\n+        \"threading\",\n+        \"time\",\n+        \"timeit\",\n+        \"tkinter\",\n+        \"token\",\n+        \"tokenize\",\n+        \"trace\",\n+        \"traceback\",\n+        \"tracemalloc\",\n+        \"tty\",\n+        \"turtle\",\n+        \"turtledemo\",\n+        \"types\",\n+        \"typing\",\n+        \"unicodedata\",\n+        \"unittest\",\n+        \"urllib\",\n+        \"uu\",\n+        \"uuid\",\n+        \"venv\",\n+        \"warnings\",\n+        \"wave\",\n+        \"weakref\",\n+        \"webbrowser\",\n+        \"winreg\",\n+        \"winsound\",\n+        \"wsgiref\",\n+        \"xdrlib\",\n+        \"xml\",\n+        \"xmlrpc\",\n+        \"zipapp\",\n+        \"zipfile\",\n+        \"zipimport\",\n+        \"zlib\",\n+    }\n+)\n+\n+PY_3_8 = frozenset(\n+    PY_3_7\n+    - {\n+        \"macpath\",\n+    }\n+    | {\n+        \"_posixshmem\",\n+        \"_statistics\",\n+        \"_xxsubinterpreters\",\n+    }\n+)\n+\n+PY_3_9 = frozenset(\n+    PY_3_8\n+    - {\n+        \"_dummy_thread\",\n+        \"dummy_threading\",\n+    }\n+    | {\n+        \"_aix_support\",\n+        \"_bootsubprocess\",\n+        \"_peg_parser\",\n+        \"_zoneinfo\",\n+        \"graphlib\",\n+        \"zoneinfo\",\n+    }\n+)\n+\n+if sys.version_info[:2] == (3, 7):\n+    stdlib_module_names = PY_3_7\n+elif sys.version_info[:2] == (3, 8):\n+    stdlib_module_names = PY_3_8\n+elif sys.version_info[:2] == (3, 9):\n+    stdlib_module_names = PY_3_9\n+else:\n+    raise AssertionError(\"This module is only intended as a backport for Python <= 3.9\")\ndiff --git a/astroid/manager.py b/astroid/manager.py\nindex 8a5b05c7bd..b0cecc30c9 100644\n--- a/astroid/manager.py\n+++ b/astroid/manager.py\n@@ -30,7 +30,7 @@\n     get_source_file,\n     is_module_name_part_of_extension_package_whitelist,\n     is_python_source,\n-    is_standard_module,\n+    is_stdlib_module,\n     load_module_from_name,\n     modpath_from_file,\n )\n@@ -154,7 +154,7 @@ def _build_namespace_module(\n     def _can_load_extension(self, modname: str) -> bool:\n         if self.always_load_extensions:\n             return True\n-        if is_standard_module(modname):\n+        if is_stdlib_module(modname):\n             return True\n         return is_module_name_part_of_extension_package_whitelist(\n             modname, self.extension_package_whitelist\ndiff --git a/astroid/modutils.py b/astroid/modutils.py\nindex 1b5057f5d1..f05b5f89c6 100644\n--- a/astroid/modutils.py\n+++ b/astroid/modutils.py\n@@ -26,14 +26,20 @@\n import sys\n import sysconfig\n import types\n+import warnings\n from collections.abc import Callable, Iterable, Sequence\n from contextlib import redirect_stderr, redirect_stdout\n from functools import lru_cache\n from pathlib import Path\n \n-from astroid.const import IS_JYTHON, IS_PYPY\n+from astroid.const import IS_JYTHON, IS_PYPY, PY310_PLUS\n from astroid.interpreter._import import spec, util\n \n+if PY310_PLUS:\n+    from sys import stdlib_module_names\n+else:\n+    from astroid._backport_stdlib_names import stdlib_module_names\n+\n logger = logging.getLogger(__name__)\n \n \n@@ -510,6 +516,41 @@ def is_python_source(filename: str | None) -> bool:\n     return os.path.splitext(filename)[1][1:] in PY_SOURCE_EXTS\n \n \n+def is_stdlib_module(modname: str) -> bool:\n+    \"\"\"Return: True if the modname is in the standard library\"\"\"\n+    return modname.split(\".\")[0] in stdlib_module_names\n+\n+\n+def module_in_path(modname: str, path: str | Iterable[str]) -> bool:\n+    \"\"\"Try to determine if a module is imported from one of the specified paths\n+\n+    :param modname: name of the module\n+\n+    :param path: paths to consider\n+\n+    :return:\n+      true if the module:\n+      - is located on the path listed in one of the directory in `paths`\n+    \"\"\"\n+\n+    modname = modname.split(\".\")[0]\n+    try:\n+        filename = file_from_modpath([modname])\n+    except ImportError:\n+        # Import failed, we can't check path if we don't know it\n+        return False\n+\n+    if filename is None:\n+        # No filename likely means it's compiled in, or potentially a namespace\n+        return False\n+    filename = _normalize_path(filename)\n+\n+    if isinstance(path, str):\n+        return filename.startswith(_cache_normalize_path(path))\n+\n+    return any(filename.startswith(_cache_normalize_path(entry)) for entry in path)\n+\n+\n def is_standard_module(modname: str, std_path: Iterable[str] | None = None) -> bool:\n     \"\"\"Try to guess if a module is a standard python module (by default,\n     see `std_path` parameter's description).\n@@ -523,6 +564,12 @@ def is_standard_module(modname: str, std_path: Iterable[str] | None = None) -> b\n       - is located on the path listed in one of the directory in `std_path`\n       - is a built-in module\n     \"\"\"\n+    warnings.warn(\n+        \"is_standard_module() is deprecated. Use, is_stdlib_module() or module_in_path() instead\",\n+        DeprecationWarning,\n+        stacklevel=2,\n+    )\n+\n     modname = modname.split(\".\")[0]\n     try:\n         filename = file_from_modpath([modname])\n",
  "problem_statement": "Replace modutils.is_standard_module() logic with sys.stdlib_module_names\n\r\nThis extends from the conversation in https://github.com/PyCQA/pylint/pull/8190.\r\n\r\nThe logic in `modutils.is_standard_module()` should largely be able to be replaced with [sys.stdlib_module_names](https://docs.python.org/3/library/sys.html#sys.stdlib_module_names), which was introduced in 3.10. The advantages are it will be faster (no imports, no filesystem traversal), it's not dependent on the local environment,  and it's maintained upstream, generated from source. For the referenced PR, I backported the generating code in CPython to generate sets for a shim to support 3.7 - 3.9.\r\n\r\nI started working on a PR for Astroid, but it seems `modutils.is_standard_module()` actually does two different things depending on how it's called.\r\n1. If no path is specified, it tries to determine if a module is part of the standard library (or a builtin, or compiled in) by inspecting the path of module after importing it.\r\n2. If a path is specified, it does the same logic, but ultimately is determining if the module is in the path specified.\r\n\r\nFor the second case, I could only find one case in the wild, in pyreverse.\r\n\r\nhttps://github.com/PyCQA/pylint/blob/5bc4cd9a4b4c240227a41786823a6f226864dc4b/pylint/pyreverse/inspector.py#L308\r\n\r\nThese seem like different behaviors to me. I'm unsure how to proceed with PR. Here are some options I've considered.\r\n\r\n- Option 1:\r\n  - Introduce a new function, basically a wrapper for sys.stdlib_module_names and the shim\r\n  - Old behavior is preserved\r\n  - Advantage of a function, even though it's very simple, is it provides a space to add overriding logic if needed down the road\r\n   \r\n- Option 2:\r\n   - Only introduce the shim, so the code is in a common place for Astroid and Pylint\r\n   - Can be dropped with 3.9\r\n   - Old behavior is preserved\r\n\r\n- Option 3:\r\n  - Fall back to old behavior if a path is given, check sys.stdlib_module_names otherwise\r\n\r\n- Option 4:\r\n  - Deprecate `is_standard_module()`\r\n  - Introduce new functions more specific to how they are used\r\n\r\n- Option 5:\r\n  - Do Nothing\r\n\r\nI'm sure there are more options, but this is what comes to mind now. Would appreciate your thoughts and ideas.\r\n\n",
  "pull_number": 2015,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/test_manager.py b/tests/test_manager.py\nindex 312f446ec2..f90be5c810 100644\n--- a/tests/test_manager.py\n+++ b/tests/test_manager.py\n@@ -22,7 +22,7 @@\n     AttributeInferenceError,\n )\n from astroid.interpreter._import import util\n-from astroid.modutils import EXT_LIB_DIRS, is_standard_module\n+from astroid.modutils import EXT_LIB_DIRS, module_in_path\n from astroid.nodes import Const\n from astroid.nodes.scoped_nodes import ClassDef\n \n@@ -411,7 +411,7 @@ def test_clear_cache_clears_other_lru_caches(self) -> None:\n \n         # Generate some hits and misses\n         ClassDef().lookup(\"garbage\")\n-        is_standard_module(\"unittest\", std_path=[\"garbage_path\"])\n+        module_in_path(\"unittest\", \"garbage_path\")\n         util.is_namespace(\"unittest\")\n         astroid.interpreter.objectmodel.ObjectModel().attributes()\n         with pytest.raises(AttributeInferenceError):\ndiff --git a/tests/test_modutils.py b/tests/test_modutils.py\nindex f2daa346d8..8058b13223 100644\n--- a/tests/test_modutils.py\n+++ b/tests/test_modutils.py\n@@ -20,6 +20,7 @@\n \n import astroid\n from astroid import modutils\n+from astroid.const import PY310_PLUS\n from astroid.interpreter._import import spec\n \n from . import resources\n@@ -287,7 +288,7 @@ def test_raise(self) -> None:\n         self.assertRaises(modutils.NoSourceFile, modutils.get_source_file, \"whatever\")\n \n \n-class StandardLibModuleTest(resources.SysPathSetup, unittest.TestCase):\n+class IsStandardModuleTest(resources.SysPathSetup, unittest.TestCase):\n     \"\"\"\n     Return true if the module may be considered as a module from the standard\n     library.\n@@ -296,50 +297,153 @@ class StandardLibModuleTest(resources.SysPathSetup, unittest.TestCase):\n     def test_datetime(self) -> None:\n         # This is an interesting example, since datetime, on pypy,\n         # is under lib_pypy, rather than the usual Lib directory.\n-        self.assertTrue(modutils.is_standard_module(\"datetime\"))\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"datetime\")\n \n     def test_builtins(self) -> None:\n-        self.assertFalse(modutils.is_standard_module(\"__builtin__\"))\n-        self.assertTrue(modutils.is_standard_module(\"builtins\"))\n+        with pytest.warns(DeprecationWarning):\n+            assert not modutils.is_standard_module(\"__builtin__\")\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"builtins\")\n \n     def test_builtin(self) -> None:\n-        self.assertTrue(modutils.is_standard_module(\"sys\"))\n-        self.assertTrue(modutils.is_standard_module(\"marshal\"))\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"sys\")\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"marshal\")\n \n     def test_nonstandard(self) -> None:\n-        self.assertFalse(modutils.is_standard_module(\"astroid\"))\n+        with pytest.warns(DeprecationWarning):\n+            assert not modutils.is_standard_module(\"astroid\")\n \n     def test_unknown(self) -> None:\n-        self.assertFalse(modutils.is_standard_module(\"unknown\"))\n+        with pytest.warns(DeprecationWarning):\n+            assert not modutils.is_standard_module(\"unknown\")\n \n     def test_4(self) -> None:\n-        self.assertTrue(modutils.is_standard_module(\"hashlib\"))\n-        self.assertTrue(modutils.is_standard_module(\"pickle\"))\n-        self.assertTrue(modutils.is_standard_module(\"email\"))\n-        self.assertTrue(modutils.is_standard_module(\"io\"))\n-        self.assertFalse(modutils.is_standard_module(\"StringIO\"))\n-        self.assertTrue(modutils.is_standard_module(\"unicodedata\"))\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"hashlib\")\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"pickle\")\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"email\")\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"io\")\n+        with pytest.warns(DeprecationWarning):\n+            assert not modutils.is_standard_module(\"StringIO\")\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"unicodedata\")\n \n     def test_custom_path(self) -> None:\n         datadir = resources.find(\"\")\n         if any(datadir.startswith(p) for p in modutils.EXT_LIB_DIRS):\n             self.skipTest(\"known breakage of is_standard_module on installed package\")\n \n-        self.assertTrue(modutils.is_standard_module(\"data.module\", (datadir,)))\n-        self.assertTrue(\n-            modutils.is_standard_module(\"data.module\", (os.path.abspath(datadir),))\n-        )\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"data.module\", (datadir,))\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\n+                \"data.module\", (os.path.abspath(datadir),)\n+            )\n         # \"\" will evaluate to cwd\n-        self.assertTrue(modutils.is_standard_module(\"data.module\", (\"\",)))\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"data.module\", (\"\",))\n \n     def test_failing_edge_cases(self) -> None:\n         # using a subpackage/submodule path as std_path argument\n-        self.assertFalse(modutils.is_standard_module(\"xml.etree\", etree.__path__))\n+        with pytest.warns(DeprecationWarning):\n+            assert not modutils.is_standard_module(\"xml.etree\", etree.__path__)\n+        # using a module + object name as modname argument\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"sys.path\")\n+        # this is because only the first package/module is considered\n+        with pytest.warns(DeprecationWarning):\n+            assert modutils.is_standard_module(\"sys.whatever\")\n+        with pytest.warns(DeprecationWarning):\n+            assert not modutils.is_standard_module(\"xml.whatever\", etree.__path__)\n+\n+\n+class IsStdLibModuleTest(resources.SysPathSetup, unittest.TestCase):\n+    \"\"\"\n+    Return true if the module is path of the standard library\n+    \"\"\"\n+\n+    def test_datetime(self) -> None:\n+        # This is an interesting example, since datetime, on pypy,\n+        # is under lib_pypy, rather than the usual Lib directory.\n+        assert modutils.is_stdlib_module(\"datetime\")\n+\n+    def test_builtins(self) -> None:\n+        assert not modutils.is_stdlib_module(\"__builtin__\")\n+        assert modutils.is_stdlib_module(\"builtins\")\n+\n+    def test_builtin(self) -> None:\n+        assert modutils.is_stdlib_module(\"sys\")\n+        assert modutils.is_stdlib_module(\"marshal\")\n+\n+    def test_nonstandard(self) -> None:\n+        assert not modutils.is_stdlib_module(\"astroid\")\n+\n+    def test_unknown(self) -> None:\n+        assert not modutils.is_stdlib_module(\"unknown\")\n+\n+    def test_4(self) -> None:\n+        assert modutils.is_stdlib_module(\"hashlib\")\n+        assert modutils.is_stdlib_module(\"pickle\")\n+        assert modutils.is_stdlib_module(\"email\")\n+        assert modutils.is_stdlib_module(\"io\")\n+        assert not modutils.is_stdlib_module(\"StringIO\")\n+        assert modutils.is_stdlib_module(\"unicodedata\")\n+\n+    def test_subpackages(self) -> None:\n         # using a module + object name as modname argument\n-        self.assertTrue(modutils.is_standard_module(\"sys.path\"))\n+        assert modutils.is_stdlib_module(\"sys.path\")\n         # this is because only the first package/module is considered\n-        self.assertTrue(modutils.is_standard_module(\"sys.whatever\"))\n-        self.assertFalse(modutils.is_standard_module(\"xml.whatever\", etree.__path__))\n+        assert modutils.is_stdlib_module(\"sys.whatever\")\n+\n+    def test_platform_specific(self) -> None:\n+        assert modutils.is_stdlib_module(\"_curses\")\n+        assert modutils.is_stdlib_module(\"msvcrt\")\n+        assert modutils.is_stdlib_module(\"termios\")\n+\n+\n+class ModuleInPathTest(resources.SysPathSetup, unittest.TestCase):\n+    \"\"\"\n+    Return true if the module is imported from the specified path\n+    \"\"\"\n+\n+    def test_success(self) -> None:\n+        datadir = resources.find(\"\")\n+        assert modutils.module_in_path(\"data.module\", datadir)\n+        assert modutils.module_in_path(\"data.module\", (datadir,))\n+        assert modutils.module_in_path(\"data.module\", os.path.abspath(datadir))\n+        # \"\" will evaluate to cwd\n+        assert modutils.module_in_path(\"data.module\", \"\")\n+\n+    def test_bad_import(self) -> None:\n+        datadir = resources.find(\"\")\n+        assert not modutils.module_in_path(\"this_module_is_no_more\", datadir)\n+\n+    def test_no_filename(self) -> None:\n+        datadir = resources.find(\"\")\n+        assert not modutils.module_in_path(\"sys\", datadir)\n+\n+    def test_failure(self) -> None:\n+        datadir = resources.find(\"\")\n+        assert not modutils.module_in_path(\"etree\", datadir)\n+        assert not modutils.module_in_path(\"astroid\", datadir)\n+\n+\n+class BackportStdlibNamesTest(resources.SysPathSetup, unittest.TestCase):\n+    \"\"\"\n+    Verify backport raises exception on newer versions\n+    \"\"\"\n+\n+    @pytest.mark.skipif(not PY310_PLUS, reason=\"Backport valid on <=3.9\")\n+    def test_import_error(self) -> None:\n+        with pytest.raises(AssertionError):\n+            # pylint: disable-next=import-outside-toplevel, unused-import\n+            from astroid import _backport_stdlib_names  # noqa\n \n \n class IsRelativeTest(unittest.TestCase):\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/56a65daf1ba391cc85d1a32a8802cfd0c7b7b2ab"
}