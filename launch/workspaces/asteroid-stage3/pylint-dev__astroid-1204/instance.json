{
  "all_hints_text": "I can take a look although I can't promise a timeframe. I am quite busy this week.\nTested a few more things. Reverting the change to the return would fix the issue.\r\nhttps://github.com/PyCQA/astroid/pull/1186/files#diff-4be1f47d39f9b6a7ff09c297908537522c8b33a348c0754d429a47dfa3308385L747-R755\r\n```diff\r\n-          return f\"{package_name}.{modname}\"\r\n+          return f\"{package_name}.{modname.split('.')[0]}\"\r\n```\r\n\r\nNot sure that was even necessary as all the test cases seem to pass even without it. If it is, maybe there needs to be a conditional added?\n\n",
  "base_commit": "a92487baedf9e85a587ac6fc0b5f99c7cec04f46",
  "commit_urls": [
    "https://github.com/pylint-dev/astroid/commit/ccfc156b60b019360d8a614754da7a17e470b799"
  ],
  "created_at": "2021-10-06T15:22:11Z",
  "hints_text": "I can take a look although I can't promise a timeframe. I am quite busy this week.\nTested a few more things. Reverting the change to the return would fix the issue.\r\nhttps://github.com/PyCQA/astroid/pull/1186/files#diff-4be1f47d39f9b6a7ff09c297908537522c8b33a348c0754d429a47dfa3308385L747-R755\r\n```diff\r\n-          return f\"{package_name}.{modname}\"\r\n+          return f\"{package_name}.{modname.split('.')[0]}\"\r\n```\r\n\r\nNot sure that was even necessary as all the test cases seem to pass even without it. If it is, maybe there needs to be a conditional added?\n\n",
  "instance_id": "pylint-dev__astroid-1204",
  "issue_numbers": [
    1200
  ],
  "language": "python",
  "patch": "diff --git a/astroid/nodes/scoped_nodes.py b/astroid/nodes/scoped_nodes.py\nindex ba8fca0cfb..4559fc5573 100644\n--- a/astroid/nodes/scoped_nodes.py\n+++ b/astroid/nodes/scoped_nodes.py\n@@ -752,7 +752,7 @@ def relative_to_absolute_name(self, modname, level):\n         if package_name:\n             if not modname:\n                 return package_name\n-            return f\"{package_name}.{modname.split('.')[0]}\"\n+            return f\"{package_name}.{modname}\"\n         return modname\n \n     def wildcard_import_names(self):\n",
  "problem_statement": "Regression for #1186\n#1186 added logic for parsing package names. This seems to have caused a regression visible as `too-many-function-args` error in the example below.\r\n\r\nFile structure\r\n```\r\nb\r\n\u251c\u2500\u2500 __init__.py\r\n\u251c\u2500\u2500 a.py\r\n\u2514\u2500\u2500 level1\r\n    \u251c\u2500\u2500 __init__.py\r\n    \u2514\u2500\u2500 b.py\r\n```\r\n\r\n```py\r\n# b/a.py\r\n\r\n# pylint: disable=missing-docstring\r\n\r\nfrom .level1.b import func\r\n\r\ndef do_something(var, some_other_var):  # error\r\n    func(var, some_other_var)\r\n\r\n```\r\n\r\n```py\r\n# b/level1/__init__.py\r\n\r\ndef func(var):\r\n    pass\r\n```\r\n\r\n```py\r\n# b/level1/b.py\r\n\r\ndef func(var, some_other_var):\r\n    pass\r\n```\r\n\r\nRuning pylint: `pylint -sn b/a.py`\r\n```\r\n************* Module b.a\r\nb/a.py:8:4: E1121: Too many positional arguments for function call (too-many-function-args)\r\n```\r\n\r\nThe error seems to happen as `func` is wrongly inferred as coming from `b/level1/__init__.py`, thus having one argument less than passed. The inference happens here: [typecheck.py -> visit_call](https://github.com/PyCQA/pylint/blob/7bc962ba81966b61b5b626cbfce36dd9279226c7/pylint/checkers/typecheck.py#L1274-L1279).\r\n\r\n--\r\n@DanielNoord As you authored #1186, would you mind taking a look at this?\n",
  "pull_number": 1204,
  "repo": "pylint-dev/astroid",
  "test_patch": "diff --git a/tests/testdata/python3/data/beyond_top_level_two/__init__.py b/tests/testdata/python3/data/beyond_top_level_two/__init__.py\nnew file mode 100644\nindex 0000000000..e69de29bb2\ndiff --git a/tests/testdata/python3/data/beyond_top_level_two/a.py b/tests/testdata/python3/data/beyond_top_level_two/a.py\nnew file mode 100644\nindex 0000000000..4b238deaca\n--- /dev/null\n+++ b/tests/testdata/python3/data/beyond_top_level_two/a.py\n@@ -0,0 +1,7 @@\n+# pylint: disable=missing-docstring\n+\n+from .level1.beyond_top_level_two import func\n+\n+\n+def do_something(var, some_other_var):  # error\n+    func(var, some_other_var)\ndiff --git a/tests/testdata/python3/data/beyond_top_level_two/level1/__init__.py b/tests/testdata/python3/data/beyond_top_level_two/level1/__init__.py\nnew file mode 100644\nindex 0000000000..1a886aa4f6\n--- /dev/null\n+++ b/tests/testdata/python3/data/beyond_top_level_two/level1/__init__.py\n@@ -0,0 +1,2 @@\n+def func(var):\n+    pass\ndiff --git a/tests/testdata/python3/data/beyond_top_level_two/level1/beyond_top_level_two.py b/tests/testdata/python3/data/beyond_top_level_two/level1/beyond_top_level_two.py\nnew file mode 100644\nindex 0000000000..cc28914eb7\n--- /dev/null\n+++ b/tests/testdata/python3/data/beyond_top_level_two/level1/beyond_top_level_two.py\n@@ -0,0 +1,2 @@\n+def func(var, some_other_var):\n+    pass\ndiff --git a/tests/unittest_inference.py b/tests/unittest_inference.py\nindex dc662641bb..c7fbd8d7b4 100644\n--- a/tests/unittest_inference.py\n+++ b/tests/unittest_inference.py\n@@ -6540,5 +6540,11 @@ def test_namespace_package() -> None:\n     resources.build_file(\"data/beyond_top_level/import_package.py\")\n \n \n+def test_namespace_package_same_name() -> None:\n+    \"\"\"check that a file using namespace packages and relative imports\n+    with similar names is parseable\"\"\"\n+    resources.build_file(\"data/beyond_top_level_two/a.py\")\n+\n+\n if __name__ == \"__main__\":\n     unittest.main()\n",
  "commit_url": "https://github.com/pylint-dev/astroid/tree/a92487baedf9e85a587ac6fc0b5f99c7cec04f46"
}